!function(){function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var o=0;o<t.length;o++){var e=t[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{F4UR:function(o,e,i){"use strict";i.r(e),i.d(e,"LoginPageModule",function(){return F});var a=i("ofXK"),r=i("3Pt+"),c=i("TEn/"),l=i("tyNb"),s=i("mrSG"),u=i("8RPc"),d=i("2Rin"),b=i("PSD3"),g=i.n(b),f=i("wljF"),h=i("hxji"),p=i("TCp9"),m=i("fXoL");function v(n,t){1&n&&(m.Vb(0,"span"),m.Ac(1,"INICIAR"),m.Ub())}function C(n,t){1&n&&m.Rb(0,"ion-spinner",26)}function U(n,t){if(1&n){var o=m.Wb();m.Vb(0,"form",12,13),m.Vb(2,"ion-list",14),m.Vb(3,"ion-item",14),m.Vb(4,"ion-input",15,16),m.dc("ngModelChange",function(n){return m.uc(o),m.hc().login.email=n}),m.Ub(),m.Ub(),m.Vb(6,"ion-text",17),m.Vb(7,"p",18),m.Ac(8," Correo es requerido "),m.Ub(),m.Ub(),m.Vb(9,"ion-item",14),m.Vb(10,"ion-input",19,20),m.dc("ngModelChange",function(n){return m.uc(o),m.hc().login.password=n}),m.Ub(),m.Ub(),m.Vb(12,"ion-text",17),m.Vb(13,"p",18),m.Ac(14," Contrase\xf1a es requerida "),m.Ub(),m.Ub(),m.Ub(),m.Vb(15,"ion-row",21),m.Vb(16,"ion-col",21),m.Vb(17,"p",22),m.dc("click",function(){return m.uc(o),m.hc().resetPass()}),m.Ac(18,"Olvidaste tu contrase\xf1a?"),m.Ub(),m.Vb(19,"ion-button",23),m.dc("click",function(){m.uc(o);var n=m.tc(1);return m.hc().onLogin(n)}),m.zc(20,v,2,0,"span",24),m.zc(21,C,1,0,"ion-spinner",25),m.Ub(),m.Ub(),m.Ub(),m.Ub()}if(2&n){var e=m.tc(5),i=m.tc(11),a=m.hc();m.Fb(4),m.nc("ngModel",a.login.email)("placeholder","Correo"),m.Fb(3),m.nc("hidden",e.valid||0==a.submitted),m.Fb(3),m.nc("ngModel",a.login.password)("placeholder","Contrase\xf1a"),m.Fb(3),m.nc("hidden",i.valid||0==a.submitted),m.Fb(6),m.nc("disabled",a.isLogin),m.Fb(1),m.nc("ngIf",!a.isLogin),m.Fb(1),m.nc("ngIf",a.isLogin)}}function w(n,t){1&n&&(m.Vb(0,"span"),m.Ac(1," INICIAR"),m.Ub())}function V(n,t){1&n&&m.Rb(0,"ion-spinner",26)}function M(n,t){if(1&n){var o=m.Wb();m.Vb(0,"form",12,13),m.Vb(2,"ion-list",14),m.Vb(3,"ion-row"),m.Vb(4,"ion-col",27),m.dc("click",function(){return m.uc(o),m.hc().openCountry()}),m.Vb(5,"ion-item",14),m.Vb(6,"ion-input",28,29),m.dc("ngModelChange",function(n){return m.uc(o),m.hc().mobile.ccCode=n}),m.Ub(),m.Ub(),m.Ub(),m.Vb(8,"ion-col",30),m.Vb(9,"ion-item",14),m.Vb(10,"ion-input",31,32),m.dc("ngModelChange",function(n){return m.uc(o),m.hc().mobile.phone=n}),m.Ub(),m.Ub(),m.Vb(12,"ion-text",17),m.Vb(13,"p",18),m.Ac(14," Tel\xe9fono "),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(15,"ion-item",14),m.Vb(16,"ion-input",19,20),m.dc("ngModelChange",function(n){return m.uc(o),m.hc().mobile.password=n}),m.Ub(),m.Ub(),m.Vb(18,"ion-text",17),m.Vb(19,"p",18),m.Ac(20," Contrase\xf1a "),m.Ub(),m.Ub(),m.Ub(),m.Vb(21,"ion-row",21),m.Vb(22,"ion-col",21),m.Vb(23,"p",22),m.dc("click",function(){return m.uc(o),m.hc().resetPass()}),m.Ac(24,"Olvidaste tu contrase\xf1a?"),m.Ub(),m.Vb(25,"ion-button",23),m.dc("click",function(){m.uc(o);var n=m.tc(1);return m.hc().onPhoneLogin(n)}),m.zc(26,w,2,0,"span",24),m.zc(27,V,1,0,"ion-spinner",25),m.Ub(),m.Ub(),m.Ub(),m.Ub()}if(2&n){var e=m.tc(11),i=m.tc(17),a=m.hc();m.Fb(6),m.nc("ngModel",a.mobile.ccCode),m.Fb(4),m.nc("ngModel",a.mobile.phone)("placeholder","Tel\xe9fono"),m.Fb(3),m.nc("hidden",e.valid||0==a.submitted),m.Fb(3),m.nc("ngModel",a.mobile.password)("placeholder","Contrase\xf1a"),m.Fb(3),m.nc("hidden",i.valid||0==a.submitted),m.Fb(6),m.nc("disabled",a.isLogin),m.Fb(1),m.nc("ngIf",!a.isLogin),m.Fb(1),m.nc("ngIf",a.isLogin)}}function k(n,t){1&n&&(m.Vb(0,"span"),m.Ac(1," INICIAR"),m.Ub())}function P(n,t){1&n&&m.Rb(0,"ion-spinner",26)}function y(n,t){if(1&n){var o=m.Wb();m.Vb(0,"form",12,13),m.Vb(2,"ion-list",14),m.Vb(3,"ion-row"),m.Vb(4,"ion-col",27),m.dc("click",function(){return m.uc(o),m.hc().openCountry()}),m.Vb(5,"ion-item",14),m.Vb(6,"ion-input",28,29),m.dc("ngModelChange",function(n){return m.uc(o),m.hc().mobileLogin.ccCode=n}),m.Ub(),m.Ub(),m.Ub(),m.Vb(8,"ion-col",30),m.Vb(9,"ion-item",14),m.Vb(10,"ion-input",31,32),m.dc("ngModelChange",function(n){return m.uc(o),m.hc().mobileLogin.phone=n}),m.Ub(),m.Ub(),m.Vb(12,"ion-text",17),m.Vb(13,"p",18),m.Ac(14," Tel\xe9fono es requerido "),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(15,"ion-row",21),m.Vb(16,"ion-col",21),m.Vb(17,"p",22),m.dc("click",function(){return m.uc(o),m.hc().resetPass()}),m.Ac(18,"Olvidaste tu contrase\xf1a?"),m.Ub(),m.Vb(19,"ion-button",23),m.dc("click",function(){m.uc(o);var n=m.tc(1);return m.hc().onOTPLogin(n)}),m.zc(20,k,2,0,"span",24),m.zc(21,P,1,0,"ion-spinner",25),m.Ub(),m.Ub(),m.Ub(),m.Ub()}if(2&n){var e=m.tc(11),i=m.hc();m.Fb(6),m.nc("ngModel",i.mobileLogin.ccCode),m.Fb(4),m.nc("ngModel",i.mobileLogin.phone)("placeholder","Tel\xe9fono"),m.Fb(3),m.nc("hidden",e.valid||0==i.submitted),m.Fb(6),m.nc("disabled",i.isLogin),m.Fb(1),m.nc("ngIf",!i.isLogin),m.Fb(1),m.nc("ngIf",i.isLogin)}}var x,_,L,I=[{path:"",component:(x=function(){function o(t,e,i,a,r,c,l,s){n(this,o),this.router=t,this.api=e,this.util=i,this.navCtrl=a,this.oneSignal=r,this.menuController=c,this.modalController=l,this.modalCtrl=s,this.login={email:"",password:""},this.mobile={ccCode:"",phone:"",password:""},this.mobileLogin={ccCode:"",phone:""},this.submitted=!1,this.isLogin=!1,this.mobile.ccCode="+91",this.mobileLogin.ccCode="+91",this.oneSignal.getIds().then(function(n){localStorage.setItem("fcm",n.userId)})}var e,i,a;return e=o,(i=[{key:"ngOnInit",value:function(){}},{key:"onLogin",value:function(n){var t=this;if(this.submitted=!0,n.valid){if(!/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.login.email))return this.util.showToast("Por favor ingresa un correo v\xe1lido","danger","bottom"),!1;this.isLogin=!0,this.api.post("users/login",this.login).then(function(n){if(t.isLogin=!1,n&&200===n.status)if(n&&n.data&&"user"===n.data.type)if("1"===n.data.status){localStorage.setItem("uid",n.data.id),t.util.userInfo=n.data;var o=localStorage.getItem("fcm");o&&null!==o&&"null"!==o&&t.api.post("users/edit_profile",{id:n.data.id,fcm_token:o}).then(function(n){},function(n){}),t.api.post("favourite/getByUid",{id:n.data.id}).then(function(n){if(n&&200===n.status&&n.data.length>0){t.util.haveFav=!0;try{t.util.favIds=n.data[0].ids.split(",")}catch(o){}}else t.util.haveFav=!1},function(n){t.util.haveFav=!1}),t.navCtrl.navigateRoot([""])}else g.a.fire({title:t.util.translate("Error"),text:"Por favor contacta al administrador",icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:t.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(function(o){o&&o.value&&t.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:n.data.id}})});else t.util.errorToast("Usuario no v\xe1lido"),t.login.email="",t.login.password="";else t.util.errorToast(n&&500===n.status?n.data.message:"Algo ha ido mal")},function(n){t.isLogin=!1,t.util.errorToast("Algo ha ido mal")})}}},{key:"onPhoneLogin",value:function(n){var t=this;if(this.submitted=!0,n.valid){var o={cc:this.mobile.ccCode,mobile:this.mobile.phone,password:this.mobile.password};this.isLogin=!0,this.api.post("users/loginWithPhoneAndPassword",o).then(function(n){if(t.isLogin=!1,n&&200===n.status)if(n&&n.data&&"user"===n.data.type)if("1"===n.data.status){localStorage.setItem("uid",n.data.id),t.util.userInfo=n.data;var o=localStorage.getItem("fcm");o&&null!==o&&"null"!==o&&t.api.post("users/edit_profile",{id:n.data.id,fcm_token:o}).then(function(n){},function(n){}),t.api.post("favourite/getByUid",{id:n.data.id}).then(function(n){if(n&&200===n.status&&n.data.length>0){t.util.haveFav=!0;try{t.util.favIds=n.data[0].ids.split(",")}catch(o){}}else t.util.haveFav=!1},function(n){t.util.haveFav=!1}),t.navCtrl.navigateRoot([""])}else g.a.fire({title:t.util.translate("Error"),text:"Por favor contacta al administrador",icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:t.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(function(o){o&&o.value&&t.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:n.data.id}})});else t.util.errorToast("Usuario no v\xe1lido"),t.login.email="",t.login.password="";else t.util.errorToast(n&&500===n.status?n.data.message:"Algo ha ido mal")},function(n){t.isLogin=!1,t.util.errorToast("Algo ha ido mal")}).catch(function(n){t.isLogin=!1,t.util.errorToast("Algo ha ido mal")})}}},{key:"onOTPLogin",value:function(n){var t=this;if(this.submitted=!0,n.valid){var o={mobile:this.mobileLogin.phone,cc:this.mobileLogin.ccCode};this.isLogin=!0,this.api.post("users/checkMobileNumber",o).then(function(n){t.isLogin=!1,n&&200===n.status?t.openModal(n.data.id):t.util.errorToast(n&&500===n.status?n.data.message:"Algo ha ido mal")},function(n){t.isLogin=!1,t.util.errorToast("Algo ha ido mal")}).catch(function(n){t.isLogin=!1,t.util.errorToast("Algo ha ido mal")})}}},{key:"openModal",value:function(n){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var o,e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:p.a,componentProps:{code:this.mobileLogin.ccCode,phone:this.mobileLogin.phone}});case 2:(o=t.sent).onDidDismiss().then(function(t){t&&"ok"===t.role&&e.api.post("users/getById",{id:n}).then(function(t){if(t&&200===t.status&&t.data&&t.data.length&&"user"===t.data[0].type)if(e.util.userInfo=t.data[0],t&&t.data&&"user"===t.data[0].type)if("1"===t.data[0].status){localStorage.setItem("uid",n);var o=localStorage.getItem("fcm");o&&null!==o&&"null"!==o&&e.api.post("users/edit_profile",{id:n,fcm_token:o}).then(function(n){},function(n){}),e.api.post("favourite/getByUid",{id:n}).then(function(n){if(n&&200===n.status&&n.data.length>0){e.util.haveFav=!0;try{e.util.favIds=n.data[0].ids.split(",")}catch(t){}}else e.util.haveFav=!1},function(n){e.util.haveFav=!1}),e.navCtrl.navigateRoot([""])}else g.a.fire({title:e.util.translate("Error"),text:"Por favor contacta al administrador",icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:e.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(function(t){t&&t.value&&e.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:n}})});else e.util.errorToast("Usuario no v\xe1lido"),e.login.email="",e.login.password="";else e.util.errorToast(t&&500===t.status?t.data.message:"Algo ha ido mal")},function(n){localStorage.removeItem("uid")})}),o.present();case 4:case"end":return t.stop()}},t,this)}))}},{key:"resetPass",value:function(){this.router.navigate(["/forgot"])}},{key:"register",value:function(){this.router.navigate(["register"])}},{key:"ionViewWillEnter",value:function(){this.menuController.enable(!1)}},{key:"ionViewWillLeave",value:function(){this.menuController.enable(!0)}},{key:"openCountry",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var t,o=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalController.create({component:h.a,backdropDismiss:!1,showBackdrop:!0});case 2:return(t=n.sent).onDidDismiss().then(function(n){n&&"selected"===n.role&&(o.mobile.ccCode="+"+n.data,o.mobileLogin.ccCode="+"+n.data)}),n.next=6,t.present();case 6:case"end":return n.stop()}},n,this)}))}}])&&t(e.prototype,i),a&&t(e,a),o}(),x.\u0275fac=function(n){return new(n||x)(m.Qb(l.g),m.Qb(u.a),m.Qb(d.a),m.Qb(c.db),m.Qb(f.a),m.Qb(c.bb),m.Qb(c.cb),m.Qb(c.cb))},x.\u0275cmp=m.Kb({type:x,selectors:[["app-login"]],decls:17,vars:3,consts:[["no-shadow","","no-border",""],["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"ion-padding"],[1,"login-logo"],["src","assets/icon.png","alt","foodies",1,"logo_icon"],[1,"login-name"],["novalidate","",4,"ngIf"],[1,"createAcc",3,"click"],[1,"registerTag"],["novalidate",""],["loginForm","ngForm"],["lines","none"],["type","email","name","email","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["email","ngModel"],["color","danger"],[1,"ion-padding-start",3,"hidden"],["name","password","type","password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],[1,"ion-no-margin","ion-no-padding"],[1,"frgTag",3,"click"],["type","submit","expand","block",1,"btn_class",3,"disabled","click"],[4,"ngIf"],["name","circles",4,"ngIf"],["name","circles"],["size","3",3,"click"],["disabled","true","type","text","name","ccode","spellcheck","false","autocapitalize","off","required","",2,"font-size","12px",3,"ngModel","ngModelChange"],["ccode","ngModel"],["size","9"],["type","number","name","mobile","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["phone","ngModel"]],template:function(n,t){1&n&&(m.Vb(0,"ion-header",0),m.Vb(1,"ion-toolbar",1),m.Vb(2,"ion-buttons",2),m.Vb(3,"ion-button",3),m.dc("click",function(){return t.util.back()}),m.Rb(4,"ion-icon",4),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(5,"ion-content",5),m.Vb(6,"div",6),m.Rb(7,"img",7),m.Vb(8,"p",8),m.Ac(9,"Iniciar sesi\xf3n"),m.Ub(),m.Ub(),m.zc(10,U,22,9,"form",9),m.zc(11,M,28,10,"form",9),m.zc(12,y,22,7,"form",9),m.Vb(13,"p",10),m.dc("click",function(){return t.register()}),m.Ac(14,"A\xfan no tienes una cuenta? "),m.Vb(15,"span",11),m.Ac(16,"Registrar"),m.Ub(),m.Ub(),m.Ub()),2&n&&(m.Fb(10),m.nc("ngIf","0"===t.util.user_login),m.Fb(1),m.nc("ngIf","1"===t.util.user_login),m.Fb(1),m.nc("ngIf","2"===t.util.user_login))},directives:[c.s,c.X,c.h,c.g,c.t,c.m,a.j,r.o,r.i,r.j,c.x,c.v,c.u,c.kb,r.n,r.h,r.k,c.T,c.F,c.l,c.O,c.fb],styles:["ion-footer[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]{--box-shadow:none}ion-toolbar[_ngcontent-%COMP%]{border-color:none!important}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{--color:#fff}.login-logo[_ngcontent-%COMP%]{text-align:center;right:0;left:0;margin:20% auto 20px}.login-logo[_ngcontent-%COMP%]   .logo_icon[_ngcontent-%COMP%]{width:110px!important}.login-logo[_ngcontent-%COMP%]   .login-name[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.login-logo[_ngcontent-%COMP%]   .subTitle[_ngcontent-%COMP%]{margin:0;font-size:1rem}.frgTag[_ngcontent-%COMP%]{text-align:right;color:var(--ion-color-primary)}.btn_class[_ngcontent-%COMP%]{color:#fff;height:50px;--border-radius:5px}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px}.list[_ngcontent-%COMP%]{margin-bottom:0}ion-list[_ngcontent-%COMP%]{--ion-background-color:transparent;margin:0}ion-item[_ngcontent-%COMP%]{--ion-background-color:#f3f3f3;border-radius:5px!important;margin-top:10px}.createAcc[_ngcontent-%COMP%]{text-align:center}.createAcc[_ngcontent-%COMP%]   .registerTag[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700}.btns[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:10px 0}.btns[_ngcontent-%COMP%]   .flagActive[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;border:2px solid var(--ion-color-primary);margin:0 10px}.btns[_ngcontent-%COMP%]   .flagDeactive[_ngcontent-%COMP%]{height:45px;width:45px;margin:0 10px;opacity:.5}"]}),x)}],O=((L=function t(){n(this,t)}).\u0275fac=function(n){return new(n||L)},L.\u0275mod=m.Ob({type:L}),L.\u0275inj=m.Nb({imports:[[l.i.forChild(I)],l.i]}),L),F=((_=function t(){n(this,t)}).\u0275fac=function(n){return new(n||_)},_.\u0275mod=m.Ob({type:_}),_.\u0275inj=m.Nb({imports:[[a.b,r.e,c.Y,O]]}),_)}}])}();