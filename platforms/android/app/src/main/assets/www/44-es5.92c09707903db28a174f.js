!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"rt+D":function(n,o,i){"use strict";i.r(o),i.d(o,"PickLocationPageModule",function(){return S});var a=i("ofXK"),r=i("3Pt+"),c=i("TEn/"),s=i("tyNb"),l=i("mrSG"),u=i("WOgW"),d=i("Bfh1"),p=i("mtRb"),g=i("2Rin"),m=i("yHma"),h=i("fXoL"),b=["map"];function f(e,t){if(1&e){var n=h.Wb();h.Vb(0,"ion-item",2),h.dc("click",function(){h.uc(n);var e=t.$implicit;return h.hc().selectSearchResult1(e)}),h.Ac(1),h.Rb(2,"ion-ripple-effect",11),h.Ub()}if(2&e){var o=t.$implicit;h.Fb(1),h.Cc(" ",o.description," ")}}function v(e,t){if(1&e){var n=h.Wb();h.Vb(0,"div",12),h.Vb(1,"ion-button",13),h.dc("click",function(){return h.uc(n),h.hc().selectedAddress()}),h.Ac(2," Usar esta ubicaci\xf3n "),h.Ub(),h.Ub()}}var y,k,w,C=[{path:"",component:(y=function(){function n(t,o,i,a,r,c,s,l,u,d,p){e(this,n),this.chMod=t,this.platform=o,this.androidPermissions=i,this.geolocation=a,this.router=r,this.util=c,this.alertController=s,this.navCtrl=l,this.menuController=u,this.diagnostic=d,this.locationService=p,this.autocompleteItems1=[],this.GoogleAutocomplete=new google.maps.places.AutocompleteService,this.geocoder=new google.maps.Geocoder,this.autocomplete1={query:""},this.autocompleteItems1=[]}var o,i,a;return o=n,(i=[{key:"loadMap",value:function(e,t){this.lat=e,this.lng=t;var n=new google.maps.LatLng(e,t),o={center:n,zoom:15,scaleControl:!0,streetViewControl:!1,zoomControl:!1,overviewMapControl:!1,mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,disableDoubleClickZoom:!1,styles:[]};this.map=new google.maps.Map(this.mapElement.nativeElement,o),this.previousMarker=new google.maps.Marker({position:n,map:this.map,animation:google.maps.Animation.DROP,title:"Your Location"})}},{key:"ngOnInit",value:function(){}},{key:"close",value:function(){this.navCtrl.back()}},{key:"getLocation",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.locationService.getLocationCoordinates();case 2:(t=e.sent)&&this.getAddress(t.lat,t.lng);case 4:case"end":return e.stop()}},e,this)}))}},{key:"askPermission",value:function(){this.getLocation()}},{key:"grantRequest",value:function(){var e=this;this.diagnostic.isLocationEnabled().then(function(t){t||e.diagnostic.switchToSettings(),e.geolocation.getCurrentPosition({maximumAge:3e3,timeout:1e4,enableHighAccuracy:!1}).then(function(t){t&&(e.lat=t.coords.latitude,e.lng=t.coords.longitude,e.getAddress(t.coords.latitude,t.coords.longitude))}).catch(function(t){e.diagnostic.switchToSettings()})},function(t){e.platform.is("ios")?e.iOSAlert():e.presentAlertConfirm()}).catch(function(t){e.platform.is("ios")?e.iOSAlert():e.presentAlertConfirm()})}},{key:"getAddress",value:function(e,t){var n=this,o=new google.maps.Geocoder,i=new google.maps.LatLng(e,t);o.geocode({location:i},function(o,i){o&&o.length?(n.lat=e,n.lng=t,localStorage.setItem("location","true"),localStorage.setItem("lat",n.lat),localStorage.setItem("address",o[0].formatted_address),localStorage.setItem("lng",n.lng),n.util.cityAddress=o[0].formatted_address,n.util.publishLocation(),n.navCtrl.navigateRoot([""])):n.util.errorToast("Something went wrong please try again later")})}},{key:"iOSAlert",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Alert",message:"Por favor activa tu ubicaci\xf3n para una mejor experiencia",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Ok",handler:function(){n.diagnostic.switchToSettings()}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"presentAlertConfirm",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Alert",message:"Please Enable Location Service for best experience",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Okay",handler:function(){n.askPermission()}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"selectedAddress",value:function(){localStorage.setItem("location","true"),localStorage.setItem("lat",this.lat),localStorage.setItem("lng",this.lng),localStorage.setItem("address",this.autocomplete1.query),this.util.publishLocation(),this.navCtrl.navigateRoot([""])}},{key:"onSearchChange",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.autocomplete1.query){e.next=2;break}return e.abrupt("return",void(this.autocompleteItems1=[]));case 2:(t=localStorage.getItem("addsSelected"))&&null!=t?localStorage.removeItem("addsSelected"):this.GoogleAutocomplete.getPlacePredictions({input:this.autocomplete1.query},function(e,t){e&&e.length>0&&(n.autocompleteItems1=e)});case 4:case"end":return e.stop()}},e,this)}))}},{key:"selectSearchResult1",value:function(e){var t=this;localStorage.setItem("addsSelected","true"),this.autocompleteItems1=[],this.autocomplete1.query=e.description,this.util.cityAddress=e.description,this.geocoder.geocode({placeId:e.place_id},function(e,n){"OK"===n&&e[0]&&(t.lat=e[0].geometry.location.lat(),t.lng=e[0].geometry.location.lng(),t.chMod.detectChanges(),t.loadMap(t.lat,t.lng))})}},{key:"ionViewWillEnter",value:function(){this.menuController.enable(!1)}},{key:"ionViewWillLeave",value:function(){this.menuController.enable(!0)}}])&&t(o.prototype,i),a&&t(o,a),n}(),y.\u0275fac=function(e){return new(e||y)(h.Qb(h.i),h.Qb(c.gb),h.Qb(u.a),h.Qb(d.a),h.Qb(s.g),h.Qb(g.a),h.Qb(c.b),h.Qb(c.db),h.Qb(c.bb),h.Qb(p.a),h.Qb(m.a))},y.\u0275cmp=h.Kb({type:y,selectors:[["app-pick-location"]],viewQuery:function(e,t){var n;1&e&&h.Fc(b,3),2&e&&h.sc(n=h.ec())&&(t.mapElement=n.first)},decls:17,vars:5,consts:[["mode","ios"],["slot","end"],[3,"click"],["slot","icon-only","name","close-circle-outline"],["select-all","","mode","ios",3,"placeholder","debounce","ngModel","ionChange","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["expand","block","fill","clear","shape","round","color","primary",3,"click"],[1,"ion-text-center"],["id","map",1,"map"],["map",""],["style","margin-top: 20px;padding: 30px;",4,"ngIf"],["type","bounded"],[2,"margin-top","20px","padding","30px"],["expand","block","shape","round","color","primary",3,"click"]],template:function(e,t){1&e&&(h.Vb(0,"ion-header",0),h.Vb(1,"ion-toolbar"),h.Vb(2,"ion-title"),h.Ac(3,"Buscar ubicaci\xf3n"),h.Ub(),h.Vb(4,"ion-buttons",1),h.Vb(5,"ion-button",2),h.dc("click",function(){return t.close()}),h.Rb(6,"ion-icon",3),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(7,"ion-content"),h.Vb(8,"ion-searchbar",4),h.dc("ionChange",function(e){return t.onSearchChange(e)})("ngModelChange",function(e){return t.autocomplete1.query=e}),h.Ub(),h.Vb(9,"ion-list"),h.zc(10,f,3,1,"ion-item",5),h.Ub(),h.Vb(11,"ion-button",6),h.dc("click",function(){return t.getLocation()}),h.Ac(12," Usar mi ubicaci\xf3n actual "),h.Ub(),h.Rb(13,"p",7),h.Rb(14,"div",8,9),h.zc(16,v,3,0,"div",10),h.Ub()),2&e&&(h.Fb(8),h.nc("placeholder","Buscar ubicaci\xf3n")("debounce",250)("ngModel",t.autocomplete1.query),h.Fb(2),h.nc("ngForOf",t.autocompleteItems1),h.Fb(6),h.nc("ngIf",t.lat&&t.lng))},directives:[c.s,c.X,c.W,c.h,c.g,c.t,c.m,c.G,c.kb,r.h,r.k,c.x,a.i,a.j,c.v,c.D],styles:[".btnb[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;border-bottom:1px solid #d3d3d3;position:relative;overflow:hidden}#map[_ngcontent-%COMP%]{margin-top:20px;width:100%;height:300px}"]}),y)}],x=((w=function t(){e(this,t)}).\u0275fac=function(e){return new(e||w)},w.\u0275mod=h.Ob({type:w}),w.\u0275inj=h.Nb({imports:[[s.i.forChild(C)],s.i]}),w),S=((k=function t(){e(this,t)}).\u0275fac=function(e){return new(e||k)},k.\u0275mod=h.Ob({type:k}),k.\u0275inj=h.Nb({imports:[[a.b,r.e,c.Y,x]]}),k)}}])}();