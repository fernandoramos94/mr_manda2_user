(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{F4UR:function(t,o,i){"use strict";i.r(o),i.d(o,"LoginPageModule",function(){return L});var n=i("ofXK"),e=i("3Pt+"),a=i("TEn/"),s=i("tyNb"),r=i("mrSG"),c=i("8RPc"),l=i("2Rin"),d=i("PSD3"),b=i.n(d),u=i("wljF"),g=i("hxji"),h=i("TCp9"),p=i("fXoL");function m(t,o){1&t&&(p.Vb(0,"span"),p.Ac(1,"INICIAR"),p.Ub())}function f(t,o){1&t&&p.Rb(0,"ion-spinner",26)}function C(t,o){if(1&t){const t=p.Wb();p.Vb(0,"form",12,13),p.Vb(2,"ion-list",14),p.Vb(3,"ion-item",14),p.Vb(4,"ion-input",15,16),p.dc("ngModelChange",function(o){return p.uc(t),p.hc().login.email=o}),p.Ub(),p.Ub(),p.Vb(6,"ion-text",17),p.Vb(7,"p",18),p.Ac(8," Correo es requerido "),p.Ub(),p.Ub(),p.Vb(9,"ion-item",14),p.Vb(10,"ion-input",19,20),p.dc("ngModelChange",function(o){return p.uc(t),p.hc().login.password=o}),p.Ub(),p.Ub(),p.Vb(12,"ion-text",17),p.Vb(13,"p",18),p.Ac(14," Contrase\xf1a es requerida "),p.Ub(),p.Ub(),p.Ub(),p.Vb(15,"ion-row",21),p.Vb(16,"ion-col",21),p.Vb(17,"p",22),p.dc("click",function(){return p.uc(t),p.hc().resetPass()}),p.Ac(18,"Olvidaste tu contrase\xf1a?"),p.Ub(),p.Vb(19,"ion-button",23),p.dc("click",function(){p.uc(t);const o=p.tc(1);return p.hc().onLogin(o)}),p.zc(20,m,2,0,"span",24),p.zc(21,f,1,0,"ion-spinner",25),p.Ub(),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.tc(5),o=p.tc(11),i=p.hc();p.Fb(4),p.nc("ngModel",i.login.email)("placeholder","Correo"),p.Fb(3),p.nc("hidden",t.valid||0==i.submitted),p.Fb(3),p.nc("ngModel",i.login.password)("placeholder","Contrase\xf1a"),p.Fb(3),p.nc("hidden",o.valid||0==i.submitted),p.Fb(6),p.nc("disabled",i.isLogin),p.Fb(1),p.nc("ngIf",!i.isLogin),p.Fb(1),p.nc("ngIf",i.isLogin)}}function v(t,o){1&t&&(p.Vb(0,"span"),p.Ac(1," INICIAR"),p.Ub())}function U(t,o){1&t&&p.Rb(0,"ion-spinner",26)}function V(t,o){if(1&t){const t=p.Wb();p.Vb(0,"form",12,13),p.Vb(2,"ion-list",14),p.Vb(3,"ion-row"),p.Vb(4,"ion-col",27),p.dc("click",function(){return p.uc(t),p.hc().openCountry()}),p.Vb(5,"ion-item",14),p.Vb(6,"ion-input",28,29),p.dc("ngModelChange",function(o){return p.uc(t),p.hc().mobile.ccCode=o}),p.Ub(),p.Ub(),p.Ub(),p.Vb(8,"ion-col",30),p.Vb(9,"ion-item",14),p.Vb(10,"ion-input",31,32),p.dc("ngModelChange",function(o){return p.uc(t),p.hc().mobile.phone=o}),p.Ub(),p.Ub(),p.Vb(12,"ion-text",17),p.Vb(13,"p",18),p.Ac(14," Tel\xe9fono "),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(15,"ion-item",14),p.Vb(16,"ion-input",19,20),p.dc("ngModelChange",function(o){return p.uc(t),p.hc().mobile.password=o}),p.Ub(),p.Ub(),p.Vb(18,"ion-text",17),p.Vb(19,"p",18),p.Ac(20," Contrase\xf1a "),p.Ub(),p.Ub(),p.Ub(),p.Vb(21,"ion-row",21),p.Vb(22,"ion-col",21),p.Vb(23,"p",22),p.dc("click",function(){return p.uc(t),p.hc().resetPass()}),p.Ac(24,"Olvidaste tu contrase\xf1a?"),p.Ub(),p.Vb(25,"ion-button",23),p.dc("click",function(){p.uc(t);const o=p.tc(1);return p.hc().onPhoneLogin(o)}),p.zc(26,v,2,0,"span",24),p.zc(27,U,1,0,"ion-spinner",25),p.Ub(),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.tc(11),o=p.tc(17),i=p.hc();p.Fb(6),p.nc("ngModel",i.mobile.ccCode),p.Fb(4),p.nc("ngModel",i.mobile.phone)("placeholder","Tel\xe9fono"),p.Fb(3),p.nc("hidden",t.valid||0==i.submitted),p.Fb(3),p.nc("ngModel",i.mobile.password)("placeholder","Contrase\xf1a"),p.Fb(3),p.nc("hidden",o.valid||0==i.submitted),p.Fb(6),p.nc("disabled",i.isLogin),p.Fb(1),p.nc("ngIf",!i.isLogin),p.Fb(1),p.nc("ngIf",i.isLogin)}}function M(t,o){1&t&&(p.Vb(0,"span"),p.Ac(1," INICIAR"),p.Ub())}function w(t,o){1&t&&p.Rb(0,"ion-spinner",26)}function P(t,o){if(1&t){const t=p.Wb();p.Vb(0,"form",12,13),p.Vb(2,"ion-list",14),p.Vb(3,"ion-row"),p.Vb(4,"ion-col",27),p.dc("click",function(){return p.uc(t),p.hc().openCountry()}),p.Vb(5,"ion-item",14),p.Vb(6,"ion-input",28,29),p.dc("ngModelChange",function(o){return p.uc(t),p.hc().mobileLogin.ccCode=o}),p.Ub(),p.Ub(),p.Ub(),p.Vb(8,"ion-col",30),p.Vb(9,"ion-item",14),p.Vb(10,"ion-input",31,32),p.dc("ngModelChange",function(o){return p.uc(t),p.hc().mobileLogin.phone=o}),p.Ub(),p.Ub(),p.Vb(12,"ion-text",17),p.Vb(13,"p",18),p.Ac(14," Tel\xe9fono es requerido "),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(15,"ion-row",21),p.Vb(16,"ion-col",21),p.Vb(17,"p",22),p.dc("click",function(){return p.uc(t),p.hc().resetPass()}),p.Ac(18,"Olvidaste tu contrase\xf1a?"),p.Ub(),p.Vb(19,"ion-button",23),p.dc("click",function(){p.uc(t);const o=p.tc(1);return p.hc().onOTPLogin(o)}),p.zc(20,M,2,0,"span",24),p.zc(21,w,1,0,"ion-spinner",25),p.Ub(),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.tc(11),o=p.hc();p.Fb(6),p.nc("ngModel",o.mobileLogin.ccCode),p.Fb(4),p.nc("ngModel",o.mobileLogin.phone)("placeholder","Tel\xe9fono"),p.Fb(3),p.nc("hidden",t.valid||0==o.submitted),p.Fb(6),p.nc("disabled",o.isLogin),p.Fb(1),p.nc("ngIf",!o.isLogin),p.Fb(1),p.nc("ngIf",o.isLogin)}}const _=[{path:"",component:(()=>{class t{constructor(t,o,i,n,e,a,s,r){this.router=t,this.api=o,this.util=i,this.navCtrl=n,this.oneSignal=e,this.menuController=a,this.modalController=s,this.modalCtrl=r,this.login={email:"",password:""},this.mobile={ccCode:"",phone:"",password:""},this.mobileLogin={ccCode:"",phone:""},this.submitted=!1,this.isLogin=!1,this.mobile.ccCode="+91",this.mobileLogin.ccCode="+91",this.oneSignal.getIds().then(t=>{localStorage.setItem("fcm",t.userId)})}ngOnInit(){}onLogin(t){if(this.submitted=!0,t.valid){if(!/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.login.email))return this.util.showToast("Por favor ingresa un correo v\xe1lido","danger","bottom"),!1;this.isLogin=!0,this.api.post("users/login",this.login).then(t=>{if(this.isLogin=!1,t&&200===t.status)if(t&&t.data&&"user"===t.data.type)if("1"===t.data.status){localStorage.setItem("uid",t.data.id),this.util.userInfo=t.data;const o=localStorage.getItem("fcm");o&&null!==o&&"null"!==o&&this.api.post("users/edit_profile",{id:t.data.id,fcm_token:o}).then(t=>{},t=>{}),this.api.post("favourite/getByUid",{id:t.data.id}).then(t=>{if(t&&200===t.status&&t.data.length>0){this.util.haveFav=!0;try{this.util.favIds=t.data[0].ids.split(",")}catch(o){}}else this.util.haveFav=!1},t=>{this.util.haveFav=!1}),this.navCtrl.navigateRoot([""])}else b.a.fire({title:this.util.translate("Error"),text:"Por favor contacta al administrador",icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:this.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(o=>{o&&o.value&&this.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:t.data.id}})});else this.util.errorToast("Usuario no v\xe1lido"),this.login.email="",this.login.password="";else this.util.errorToast(t&&500===t.status?t.data.message:"Algo ha ido mal")},t=>{this.isLogin=!1,this.util.errorToast("Algo ha ido mal")})}}onPhoneLogin(t){if(this.submitted=!0,t.valid){const t={cc:this.mobile.ccCode,mobile:this.mobile.phone,password:this.mobile.password};this.isLogin=!0,this.api.post("users/loginWithPhoneAndPassword",t).then(t=>{if(this.isLogin=!1,t&&200===t.status)if(t&&t.data&&"user"===t.data.type)if("1"===t.data.status){localStorage.setItem("uid",t.data.id),this.util.userInfo=t.data;const o=localStorage.getItem("fcm");o&&null!==o&&"null"!==o&&this.api.post("users/edit_profile",{id:t.data.id,fcm_token:o}).then(t=>{},t=>{}),this.api.post("favourite/getByUid",{id:t.data.id}).then(t=>{if(t&&200===t.status&&t.data.length>0){this.util.haveFav=!0;try{this.util.favIds=t.data[0].ids.split(",")}catch(o){}}else this.util.haveFav=!1},t=>{this.util.haveFav=!1}),this.navCtrl.navigateRoot([""])}else b.a.fire({title:this.util.translate("Error"),text:"Por favor contacta al administrador",icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:this.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(o=>{o&&o.value&&this.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:t.data.id}})});else this.util.errorToast("Usuario no v\xe1lido"),this.login.email="",this.login.password="";else this.util.errorToast(t&&500===t.status?t.data.message:"Algo ha ido mal")},t=>{this.isLogin=!1,this.util.errorToast("Algo ha ido mal")}).catch(t=>{this.isLogin=!1,this.util.errorToast("Algo ha ido mal")})}}onOTPLogin(t){if(this.submitted=!0,t.valid){const t={mobile:this.mobileLogin.phone,cc:this.mobileLogin.ccCode};this.isLogin=!0,this.api.post("users/checkMobileNumber",t).then(t=>{this.isLogin=!1,t&&200===t.status?this.openModal(t.data.id):this.util.errorToast(t&&500===t.status?t.data.message:"Algo ha ido mal")},t=>{this.isLogin=!1,this.util.errorToast("Algo ha ido mal")}).catch(t=>{this.isLogin=!1,this.util.errorToast("Algo ha ido mal")})}}openModal(t){return Object(r.a)(this,void 0,void 0,function*(){const o=yield this.modalCtrl.create({component:h.a,componentProps:{code:this.mobileLogin.ccCode,phone:this.mobileLogin.phone}});o.onDidDismiss().then(o=>{o&&"ok"===o.role&&this.api.post("users/getById",{id:t}).then(o=>{if(o&&200===o.status&&o.data&&o.data.length&&"user"===o.data[0].type)if(this.util.userInfo=o.data[0],o&&o.data&&"user"===o.data[0].type)if("1"===o.data[0].status){localStorage.setItem("uid",t);const o=localStorage.getItem("fcm");o&&null!==o&&"null"!==o&&this.api.post("users/edit_profile",{id:t,fcm_token:o}).then(t=>{},t=>{}),this.api.post("favourite/getByUid",{id:t}).then(t=>{if(t&&200===t.status&&t.data.length>0){this.util.haveFav=!0;try{this.util.favIds=t.data[0].ids.split(",")}catch(o){}}else this.util.haveFav=!1},t=>{this.util.haveFav=!1}),this.navCtrl.navigateRoot([""])}else b.a.fire({title:this.util.translate("Error"),text:"Por favor contacta al administrador",icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:this.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(o=>{o&&o.value&&this.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:t}})});else this.util.errorToast("Usuario no v\xe1lido"),this.login.email="",this.login.password="";else this.util.errorToast(o&&500===o.status?o.data.message:"Algo ha ido mal")},t=>{localStorage.removeItem("uid")})}),o.present()})}resetPass(){this.router.navigate(["/forgot"])}register(){this.router.navigate(["register"])}ionViewWillEnter(){this.menuController.enable(!1)}ionViewWillLeave(){this.menuController.enable(!0)}openCountry(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:g.a,backdropDismiss:!1,showBackdrop:!0});t.onDidDismiss().then(t=>{t&&"selected"===t.role&&(this.mobile.ccCode="+"+t.data,this.mobileLogin.ccCode="+"+t.data)}),yield t.present()})}}return t.\u0275fac=function(o){return new(o||t)(p.Qb(s.g),p.Qb(c.a),p.Qb(l.a),p.Qb(a.db),p.Qb(u.a),p.Qb(a.bb),p.Qb(a.cb),p.Qb(a.cb))},t.\u0275cmp=p.Kb({type:t,selectors:[["app-login"]],decls:17,vars:3,consts:[["no-shadow","","no-border",""],["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"ion-padding"],[1,"login-logo"],["src","assets/icon.png","alt","foodies",1,"logo_icon"],[1,"login-name"],["novalidate","",4,"ngIf"],[1,"createAcc",3,"click"],[1,"registerTag"],["novalidate",""],["loginForm","ngForm"],["lines","none"],["type","email","name","email","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["email","ngModel"],["color","danger"],[1,"ion-padding-start",3,"hidden"],["name","password","type","password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],[1,"ion-no-margin","ion-no-padding"],[1,"frgTag",3,"click"],["type","submit","expand","block",1,"btn_class",3,"disabled","click"],[4,"ngIf"],["name","circles",4,"ngIf"],["name","circles"],["size","3",3,"click"],["disabled","true","type","text","name","ccode","spellcheck","false","autocapitalize","off","required","",2,"font-size","12px",3,"ngModel","ngModelChange"],["ccode","ngModel"],["size","9"],["type","number","name","mobile","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["phone","ngModel"]],template:function(t,o){1&t&&(p.Vb(0,"ion-header",0),p.Vb(1,"ion-toolbar",1),p.Vb(2,"ion-buttons",2),p.Vb(3,"ion-button",3),p.dc("click",function(){return o.util.back()}),p.Rb(4,"ion-icon",4),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(5,"ion-content",5),p.Vb(6,"div",6),p.Rb(7,"img",7),p.Vb(8,"p",8),p.Ac(9,"Iniciar sesi\xf3n"),p.Ub(),p.Ub(),p.zc(10,C,22,9,"form",9),p.zc(11,V,28,10,"form",9),p.zc(12,P,22,7,"form",9),p.Vb(13,"p",10),p.dc("click",function(){return o.register()}),p.Ac(14,"A\xfan no tienes una cuenta? "),p.Vb(15,"span",11),p.Ac(16,"Registrar"),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Fb(10),p.nc("ngIf","0"===o.util.user_login),p.Fb(1),p.nc("ngIf","1"===o.util.user_login),p.Fb(1),p.nc("ngIf","2"===o.util.user_login))},directives:[a.s,a.X,a.h,a.g,a.t,a.m,n.j,e.o,e.i,e.j,a.x,a.v,a.u,a.kb,e.n,e.h,e.k,a.T,a.F,a.l,a.O,a.fb],styles:["ion-footer[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]{--box-shadow:none}ion-toolbar[_ngcontent-%COMP%]{border-color:none!important}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{--color:#fff}.login-logo[_ngcontent-%COMP%]{text-align:center;right:0;left:0;margin:20% auto 20px}.login-logo[_ngcontent-%COMP%]   .logo_icon[_ngcontent-%COMP%]{width:110px!important}.login-logo[_ngcontent-%COMP%]   .login-name[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.login-logo[_ngcontent-%COMP%]   .subTitle[_ngcontent-%COMP%]{margin:0;font-size:1rem}.frgTag[_ngcontent-%COMP%]{text-align:right;color:var(--ion-color-primary)}.btn_class[_ngcontent-%COMP%]{color:#fff;height:50px;--border-radius:5px}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px}.list[_ngcontent-%COMP%]{margin-bottom:0}ion-list[_ngcontent-%COMP%]{--ion-background-color:transparent;margin:0}ion-item[_ngcontent-%COMP%]{--ion-background-color:#f3f3f3;border-radius:5px!important;margin-top:10px}.createAcc[_ngcontent-%COMP%]{text-align:center}.createAcc[_ngcontent-%COMP%]   .registerTag[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700}.btns[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:10px 0}.btns[_ngcontent-%COMP%]   .flagActive[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;border:2px solid var(--ion-color-primary);margin:0 10px}.btns[_ngcontent-%COMP%]   .flagDeactive[_ngcontent-%COMP%]{height:45px;width:45px;margin:0 10px;opacity:.5}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=p.Ob({type:t}),t.\u0275inj=p.Nb({imports:[[s.i.forChild(_)],s.i]}),t})(),L=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=p.Ob({type:t}),t.\u0275inj=p.Nb({imports:[[n.b,e.e,a.Y,x]]}),t})()}}]);