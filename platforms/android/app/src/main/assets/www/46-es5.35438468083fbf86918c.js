!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{fhSy:function(t,o,i){"use strict";i.r(o),i.d(o,"RegisterPageModule",function(){return U});var a=i("ofXK"),r=i("3Pt+"),c=i("TEn/"),l=i("tyNb"),s=i("mrSG"),d=i("2Rin"),g=i("8RPc"),u=i("TCp9"),b=i("m/P+"),m=i("wd/R"),p=i("hxji"),h=i("fXoL");function f(e,n){1&e&&(h.Vb(0,"span"),h.Ac(1," INICIAR"),h.Ub())}function v(e,n){1&e&&h.Rb(0,"ion-spinner",46)}var C,k,M,_=[{path:"",component:(C=function(){function t(n,o,i,a,r,c,l,s){e(this,t),this.router=n,this.api=o,this.util=i,this.navCtrl=a,this.modalCtrl=r,this.iab=c,this.menuController=l,this.alertController=s,this.login={email:"",first_name:"",last_name:"",password:"",gender:"1",mobile:"",fcm_token:"",type:"",lat:"",lng:"",cover:"",status:"",verified:"",others:"",date:"",stripe_key:"",cc:"",check:!1},this.submitted=!1,this.isLogin=!1,this.ccCode="+503",this.login.cc="+503"}var o,i,a;return o=t,(i=[{key:"openModal",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:u.a,componentProps:{code:this.ccCode,phone:this.login.mobile}});case 2:(n=e.sent).onDidDismiss().then(function(e){if(e&&"ok"===e.role){var n={first_name:t.login.first_name,last_name:t.login.last_name,email:t.login.email,password:t.login.password,gender:t.login.gender,fcm_token:localStorage.getItem("fcm")?localStorage.getItem("fcm"):"NA",type:"user",lat:"",lng:"",cover:"NA",mobile:t.login.mobile,status:1,country_code:t.ccCode,verified:0,others:1,date:m().format("YYYY-MM-DD"),stripe_key:""};t.isLogin=!0,t.api.post("users/registerUser",n).then(function(e){if(t.isLogin=!1,e&&200===e.status){t.util.userInfo=e.data,localStorage.setItem("uid",e.data.id);var n=localStorage.getItem("fcm");n&&null!==n&&"null"!==n&&t.api.post("users/edit_profile",{id:e.data.id,fcm_token:n}).then(function(e){},function(e){}),t.sendVerification(t.login.email,t.api.baseUrl+"users/verify?uid="+e.data.id),t.navCtrl.navigateRoot([""])}else t.util.errorToast(e&&500===e.status?e.data.message:"Algo ha ido mal")},function(e){t.isLogin=!1,t.util.errorToast("Algo ha ido mal")})}}),n.present();case 4:case"end":return e.stop()}},e,this)}))}},{key:"presentAlertConfirm",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Confirmaci\xf3n",message:"Enviaremos un c\xf3digo de verificaci\xf3n a tu n\xfamero de tel\xe9fono  "+this.ccCode+this.login.mobile,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Enviar",handler:function(){t.openModal()}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"ngOnInit",value:function(){}},{key:"onLogin",value:function(e){var n=this;if(this.submitted=!0,e.valid){if(!this.login.check)return this.util.showToast("Por favor acepta nuestros t\xe9rminos y condiciones","dark","bottom"),!1;if(!/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.login.email))return this.util.showToast(this.util.translate("Please enter valid email"),"danger","bottom"),!1;if("1"===this.util.twillo){var t={email:this.login.email,phone:this.login.mobile};this.isLogin=!0,this.api.post("users/validatePhoneAndEmail",t).then(function(e){n.isLogin=!1,e&&200===e.status?n.presentAlertConfirm():n.util.errorToast(e&&500===e.status?e.data.message:"Algo ha ido mal")},function(e){n.isLogin=!1,n.util.errorToast("Algo ha ido mal")}).catch(function(e){n.isLogin=!1,n.util.errorToast("Algo ha ido mal")})}else{var o={first_name:this.login.first_name,last_name:this.login.last_name,email:this.login.email,password:this.login.password,gender:this.login.gender,fcm_token:localStorage.getItem("fcm")?localStorage.getItem("fcm"):"NA",type:"user",lat:"",lng:"",cover:"NA",mobile:this.login.mobile,status:1,country_code:this.ccCode,verified:0,others:1,date:m().format("YYYY-MM-DD"),stripe_key:""};this.isLogin=!0,this.api.post("users/registerUser",o).then(function(e){if(n.isLogin=!1,e&&200===e.status){n.util.userInfo=e.data,localStorage.setItem("uid",e.data.id);var t=localStorage.getItem("fcm");t&&null!==t&&"null"!==t&&n.api.post("users/edit_profile",{id:e.data.id,fcm_token:t}).then(function(e){},function(e){}),n.sendVerification(n.login.email,n.api.baseUrl+"users/verify?uid="+e.data.id),n.navCtrl.navigateRoot([""])}else n.util.errorToast(e&&500===e.status?e.data.message:"Algo ha ido mal")},function(e){n.isLogin=!1,n.util.errorToast("Algo ha ido mal")})}}}},{key:"sendVerification",value:function(e,n){this.api.post("users/sendVerificationMail",{email:e,url:n}).then(function(e){},function(e){})}},{key:"back",value:function(){this.navCtrl.back()}},{key:"openCountry",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:p.a,backdropDismiss:!1,showBackdrop:!0});case 2:return(n=e.sent).onDidDismiss().then(function(e){e&&"selected"===e.role&&(t.login.cc="+"+e.data,t.ccCode="+"+e.data)}),e.next=6,n.present();case 6:case"end":return e.stop()}},e,this)}))}},{key:"open",value:function(e){this.iab.create("https://terebuscas.com")}},{key:"ionViewWillEnter",value:function(){this.menuController.enable(!1)}},{key:"ionViewWillLeave",value:function(){this.menuController.enable(!0)}}])&&n(o.prototype,i),a&&n(o,a),t}(),C.\u0275fac=function(e){return new(e||C)(h.Qb(l.g),h.Qb(g.a),h.Qb(d.a),h.Qb(c.db),h.Qb(c.cb),h.Qb(b.a),h.Qb(c.bb),h.Qb(c.b))},C.\u0275cmp=h.Kb({type:C,selectors:[["app-register"]],decls:86,vars:23,consts:[["no-shadow","","no-border",""],["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"ion-padding"],[1,"login-logo"],["src","assets/icon.png","alt","foodies",1,"logo_icon"],[1,"login-name"],[1,"subTitle"],["novalidate",""],["loginForm","ngForm"],["lines","none"],["type","email","name","email","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["email","ngModel"],["color","danger"],[1,"ion-padding-start",3,"hidden"],["name","password","type","password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],["type","text","name","full_name","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["full_name","ngModel"],["type","text","name","lname","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["lname","ngModel"],["size","3",3,"click"],["disabled","true","type","text","name","ccode","spellcheck","false","autocapitalize","off","required","",2,"font-size","12px",3,"ngModel","ngModelChange"],["ccode","ngModel"],["size","9"],["type","number","name","mobile","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["phone","ngModel"],["okText","Okay","cancelText","Dismiss","interface","popover","name","gender","required","",3,"ngModel","ngModelChange"],["gender","ngModel"],["value","1"],["value","0"],["value","2"],[1,"div_chk"],["name","checkls","color","light",1,"chk",3,"checked","ngModel","ngModelChange"],["checkls","ngModel"],[1,"lbl_police"],[1,"span_term"],[2,"color","var(--ion-color-primary)",3,"click"],[1,"ion-no-margin","ion-no-padding"],["type","submit","expand","block",1,"btn_class",3,"disabled","click"],[4,"ngIf"],["name","circles",4,"ngIf"],[1,"createAcc",3,"click"],[1,"registerTag"],["name","circles"]],template:function(e,n){if(1&e){var t=h.Wb();h.Vb(0,"ion-header",0),h.Vb(1,"ion-toolbar",1),h.Vb(2,"ion-buttons",2),h.Vb(3,"ion-button",3),h.dc("click",function(){return n.util.back()}),h.Rb(4,"ion-icon",4),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(5,"ion-content",5),h.Vb(6,"div",6),h.Rb(7,"img",7),h.Vb(8,"p",8),h.Ac(9,"Registrarse"),h.Ub(),h.Vb(10,"p",9),h.Ac(11,"Ingresa los datos"),h.Rb(12,"br"),h.Ac(13," para acceder a tu cuenta"),h.Ub(),h.Ub(),h.Vb(14,"form",10,11),h.Vb(16,"ion-list",12),h.Vb(17,"ion-item",12),h.Vb(18,"ion-input",13,14),h.dc("ngModelChange",function(e){return n.login.email=e}),h.Ub(),h.Ub(),h.Vb(20,"ion-text",15),h.Vb(21,"p",16),h.Ac(22," Correo es requerido "),h.Ub(),h.Ub(),h.Vb(23,"ion-item",12),h.Vb(24,"ion-input",17,18),h.dc("ngModelChange",function(e){return n.login.password=e}),h.Ub(),h.Ub(),h.Vb(26,"ion-text",15),h.Vb(27,"p",16),h.Ac(28," Contrase\xf1a es requerida "),h.Ub(),h.Ub(),h.Vb(29,"ion-item",12),h.Vb(30,"ion-input",19,20),h.dc("ngModelChange",function(e){return n.login.first_name=e}),h.Ub(),h.Ub(),h.Vb(32,"ion-text",15),h.Vb(33,"p",16),h.Ac(34," Nombre es requerido "),h.Ub(),h.Ub(),h.Vb(35,"ion-item",12),h.Vb(36,"ion-input",21,22),h.dc("ngModelChange",function(e){return n.login.last_name=e}),h.Ub(),h.Ub(),h.Vb(38,"ion-text",15),h.Vb(39,"p",16),h.Ac(40," Apellido "),h.Ub(),h.Ub(),h.Vb(41,"ion-row"),h.Vb(42,"ion-col",23),h.dc("click",function(){return n.openCountry()}),h.Vb(43,"ion-item",12),h.Vb(44,"ion-input",24,25),h.dc("ngModelChange",function(e){return n.login.cc=e}),h.Ub(),h.Ub(),h.Ub(),h.Vb(46,"ion-col",26),h.Vb(47,"ion-item",12),h.Vb(48,"ion-input",27,28),h.dc("ngModelChange",function(e){return n.login.mobile=e}),h.Ub(),h.Ub(),h.Vb(50,"ion-text",15),h.Vb(51,"p",16),h.Ac(52," Tel\xe9fono es requerido "),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(53,"ion-item",12),h.Vb(54,"ion-label"),h.Ac(55,"G\xe9nero"),h.Ub(),h.Vb(56,"ion-select",29,30),h.dc("ngModelChange",function(e){return n.login.gender=e}),h.Vb(58,"ion-select-option",31),h.Ac(59," Masculino "),h.Ub(),h.Vb(60,"ion-select-option",32),h.Ac(61," Femenino "),h.Ub(),h.Vb(62,"ion-select-option",33),h.Ac(63," Otro "),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(64,"div",34),h.Vb(65,"ion-checkbox",35,36),h.dc("ngModelChange",function(e){return n.login.check=e}),h.Ub(),h.Vb(67,"ion-label",37),h.Vb(68,"span",38),h.Ac(69," Al apretar aceptar o al utilizar esta aplicaci\xf3n, est\xe1s aprobando automaticamente nuestras T\xe9rminos y Condiciones que puedes encontrar en: "),h.Ub(),h.Vb(70,"u"),h.Vb(71,"a",39),h.dc("click",function(){return n.open("privacy")}),h.Ac(72," T\xe9rminos y Condiciones "),h.Ub(),h.Ub(),h.Ac(73," de esta aplicaci\xf3n "),h.Ub(),h.Ub(),h.Vb(74,"ion-text",15),h.Vb(75,"p",16),h.Ac(76," Por favor acepta nuestras politicas de privacidad "),h.Ub(),h.Ub(),h.Vb(77,"ion-row",40),h.Vb(78,"ion-col",40),h.Vb(79,"ion-button",41),h.dc("click",function(){h.uc(t);var e=h.tc(15);return n.onLogin(e)}),h.zc(80,f,2,0,"span",42),h.zc(81,v,1,0,"ion-spinner",43),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(82,"p",44),h.dc("click",function(){return n.back()}),h.Ac(83,"Ya tengo una cuenta "),h.Vb(84,"span",45),h.Ac(85,"Iniciar sesi\xf3n"),h.Ub(),h.Ub(),h.Ub()}if(2&e){var o=h.tc(19),i=h.tc(25),a=h.tc(31),r=h.tc(37),c=h.tc(49),l=h.tc(66);h.Fb(18),h.nc("ngModel",n.login.email)("placeholder","Correo"),h.Fb(3),h.nc("hidden",o.valid||0==n.submitted),h.Fb(3),h.nc("ngModel",n.login.password)("placeholder","Contrase\xf1a"),h.Fb(3),h.nc("hidden",i.valid||0==n.submitted),h.Fb(3),h.nc("ngModel",n.login.first_name)("placeholder","Nombre"),h.Fb(3),h.nc("hidden",a.valid||0==n.submitted),h.Fb(3),h.nc("ngModel",n.login.last_name)("placeholder","Apellido"),h.Fb(3),h.nc("hidden",r.valid||0==n.submitted),h.Fb(5),h.nc("ngModel",n.login.cc),h.Fb(4),h.nc("ngModel",n.login.mobile)("placeholder","Tel\xe9fono"),h.Fb(3),h.nc("hidden",c.valid||0==n.submitted),h.Fb(5),h.nc("ngModel",n.login.gender),h.Fb(9),h.nc("checked",n.login.check)("ngModel",n.login.check),h.Fb(10),h.nc("hidden",l.valid||0==n.submitted),h.Fb(4),h.nc("disabled",n.isLogin),h.Fb(1),h.nc("ngIf",!n.isLogin),h.Fb(1),h.nc("ngIf",n.isLogin)}},directives:[c.s,c.X,c.h,c.g,c.t,c.m,r.o,r.i,r.j,c.x,c.v,c.u,c.kb,r.n,r.h,r.k,c.T,c.F,c.l,c.fb,c.w,c.J,c.jb,c.K,c.k,c.c,a.j,c.O],styles:[".login-logo[_ngcontent-%COMP%]{text-align:center;right:0;left:0;margin:30% auto 20px}.login-logo[_ngcontent-%COMP%]   .logo_icon[_ngcontent-%COMP%]{width:110px!important}.login-logo[_ngcontent-%COMP%]   .login-name[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.login-logo[_ngcontent-%COMP%]   .subTitle[_ngcontent-%COMP%]{margin:0;font-size:1rem}.frgTag[_ngcontent-%COMP%]{text-align:right;color:var(--ion-color-primary)}.btn_class[_ngcontent-%COMP%]{color:#fff;height:50px;--border-radius:5px;margin-top:15px}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px}.list[_ngcontent-%COMP%]{margin-bottom:0}ion-list[_ngcontent-%COMP%]{--ion-background-color:transparent;margin:0}ion-item[_ngcontent-%COMP%]{--ion-background-color:#f3f3f3;border-radius:5px!important;margin-top:10px}.createAcc[_ngcontent-%COMP%]{text-align:center}.createAcc[_ngcontent-%COMP%]   .registerTag[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700}.div_chk[_ngcontent-%COMP%]{width:100%;margin:20px 0;position:relative}.div_chk[_ngcontent-%COMP%]   .lbl_police[_ngcontent-%COMP%]{font-size:10px;margin-left:40px;position:absolute;top:50%;transform:translateY(-50%)}.div_chk[_ngcontent-%COMP%]   .span_term[_ngcontent-%COMP%]{margin-right:10px}.div_chk[_ngcontent-%COMP%]   .chk[_ngcontent-%COMP%]{--size:20px;--border-radius:5px!important;--border-color-checked:var(--ion-color-primary)}.div_chk[_ngcontent-%COMP%]   .lbl_by[_ngcontent-%COMP%]{display:block;font-size:10px;color:#000;margin-top:10px}.div_chk[_ngcontent-%COMP%]   .span_termm[_ngcontent-%COMP%]{color:#8992aa;margin-right:10px}"]}),C)}],V=((M=function n(){e(this,n)}).\u0275fac=function(e){return new(e||M)},M.\u0275mod=h.Ob({type:M}),M.\u0275inj=h.Nb({imports:[[l.i.forChild(_)],l.i]}),M),U=((k=function n(){e(this,n)}).\u0275fac=function(e){return new(e||k)},k.\u0275mod=h.Ob({type:k}),k.\u0275inj=h.Nb({imports:[[a.b,r.e,c.Y,V]]}),k)}}])}();