(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{UTXh:function(t,i,n){"use strict";n.r(i),n.d(i,"ChatsPageModule",function(){return d});var o=n("ofXK"),e=n("3Pt+"),s=n("TEn/"),a=n("tyNb"),r=n("2Rin"),c=n("8RPc"),b=n("fXoL");function l(t,i){1&t&&(b.Vb(0,"ion-item"),b.Vb(1,"ion-avatar",1),b.Rb(2,"ion-skeleton-text"),b.Ub(),b.Vb(3,"ion-label"),b.Vb(4,"h3"),b.Rb(5,"ion-skeleton-text",9),b.Ub(),b.Vb(6,"p"),b.Rb(7,"ion-skeleton-text",10),b.Ub(),b.Ub(),b.Ub())}function u(t,i){if(1&t){const t=b.Wb();b.Vb(0,"ion-item",11),b.dc("click",function(){b.uc(t);const n=i.$implicit;return b.hc().onChat(n)}),b.Vb(1,"ion-avatar",1),b.Rb(2,"img",12),b.Ub(),b.Vb(3,"ion-label"),b.Vb(4,"h3"),b.Ac(5),b.Ub(),b.Vb(6,"p"),b.Ac(7),b.Ub(),b.Ub(),b.Rb(8,"ion-ripple-effect"),b.Ub()}if(2&t){const t=i.$implicit,n=b.hc();b.Fb(2),b.nc("src",n.api.mediaURL+t.cover,b.wc),b.Fb(3),b.Cc(" ",t.name," "),b.Fb(2),b.Cc(" ",t.mobile," ")}}const m=[{path:"",component:(()=>{class t{constructor(t,i,n,o){this.api=t,this.util=i,this.router=n,this.navCtrl=o,this.dummy=[],this.users=[],this.getChats()}getChats(){const t={id:localStorage.getItem("uid")};this.dummy=Array(10),this.api.post("chats/getByGroup",t).then(t=>{if(t&&200===t.status){const i=[];t.data.forEach(t=>{i.push(t.from_id),i.push(t.room_id)});let n=[...new Set(i)];n=n.filter(t=>t!==localStorage.getItem("uid"));const o={id:n.join()};this.api.post("stores/getChatsNames",o).then(t=>{this.dummy=[],t&&200===t.status&&(this.users=t.data)},t=>{this.users=[],this.dummy=[],this.util.errorToast("Algo ha ido mal")})}else this.dummy=[]},t=>{this.util.errorToast("Algo ha ido mal")})}ngOnInit(){}back(){this.navCtrl.back()}onAdmin(){const t={queryParams:{id:0,name:"Support",uid:localStorage.getItem("uid")}};this.router.navigate(["inbox"],t)}onChat(t){const i={queryParams:{id:t.id,name:t.name,uid:localStorage.getItem("uid")}};this.router.navigate(["inbox"],i)}}return t.\u0275fac=function(i){return new(i||t)(b.Qb(c.a),b.Qb(r.a),b.Qb(a.g),b.Qb(s.db))},t.\u0275cmp=b.Kb({type:t,selectors:[["app-chats"]],decls:14,vars:4,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["slot","end"],["slot","start","name","happy"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["class","ion-activatable ripple-parent",3,"click",4,"ngFor","ngForOf"],["animated","",2,"width","80%"],["animated","",2,"width","60%"],[1,"ion-activatable","ripple-parent",3,"click"],["onError","this.src='assets/imgs/user.png'",3,"src"]],template:function(t,i){1&t&&(b.Vb(0,"ion-header"),b.Vb(1,"ion-toolbar",0),b.Vb(2,"ion-buttons",1),b.Vb(3,"ion-button",2),b.dc("click",function(){return i.back()}),b.Rb(4,"ion-icon",3),b.Ub(),b.Ub(),b.Vb(5,"ion-title"),b.Ac(6),b.Ub(),b.Vb(7,"ion-buttons",4),b.Vb(8,"ion-button",2),b.dc("click",function(){return i.onAdmin()}),b.Rb(9,"ion-icon",5),b.Ac(10),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Vb(11,"ion-content",6),b.zc(12,l,8,0,"ion-item",7),b.zc(13,u,9,3,"ion-item",8),b.Ub()),2&t&&(b.Fb(6),b.Cc(" ",i.util.translate("Chats")," "),b.Fb(4),b.Cc(" ",i.util.translate("Support")," "),b.Fb(2),b.nc("ngForOf",i.dummy),b.Fb(1),b.nc("ngForOf",i.users))},directives:[s.s,s.X,s.h,s.g,s.t,s.W,s.m,o.i,s.v,s.e,s.L,s.w,s.D],styles:[""]}),t})()}];let h=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({imports:[[a.i.forChild(m)],a.i]}),t})(),d=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({imports:[[o.b,e.e,s.Y,h]]}),t})()}}]);