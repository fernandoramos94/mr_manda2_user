(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"+duN":function(n,t,i){"use strict";i.r(t),i.d(t,"InboxPageModule",function(){return v});var e=i("ofXK"),o=i("3Pt+"),s=i("TEn/"),r=i("tyNb"),c=i("2Rin"),d=i("wd/R"),a=i("8RPc"),g=i("fXoL");function l(n,t){1&n&&(g.Vb(0,"div",11),g.Rb(1,"ion-spinner",12),g.Ub())}function b(n,t){if(1&n&&(g.Vb(0,"div",17),g.Vb(1,"div",18),g.Vb(2,"div",19),g.Vb(3,"ion-label"),g.Ac(4),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&n){const n=g.hc().$implicit;g.Fb(4),g.Bc(n.message)}}function f(n,t){if(1&n&&(g.Vb(0,"div",20),g.Vb(1,"div",18),g.Vb(2,"div",19),g.Vb(3,"ion-label"),g.Ac(4),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&n){const n=g.hc().$implicit;g.Fb(4),g.Bc(n.message)}}function h(n,t){if(1&n&&(g.Vb(0,"span"),g.zc(1,b,5,1,"div",15),g.zc(2,f,5,1,"div",16),g.Ub()),2&n){const n=t.$implicit,i=g.hc(2);g.Fb(1),g.nc("ngIf",n.from_id!=i.uid),g.Fb(1),g.nc("ngIf",n.from_id==i.uid)}}function p(n,t){if(1&n&&(g.Vb(0,"div",13),g.zc(1,h,3,2,"span",14),g.Ub()),2&n){const n=g.hc();g.Fb(1),g.nc("ngForOf",n.messages)}}function _(n,t){1&n&&(g.Vb(0,"div",21),g.Rb(1,"ion-spinner",22),g.Ub())}const u=[{path:"",component:(()=>{class n{constructor(n,t,i,e){this.route=n,this.navCtrl=t,this.api=i,this.util=e,this.msg="",this.messages=[],this.route.queryParams.subscribe(n=>{n&&n.id&&n.name?(this.uid=n.uid,this.id=n.id,this.loaded=!1,this.name=n.name,this.getChats(),this.interval=setInterval(()=>{this.getChats()},12e3)):this.navCtrl.back()})}ionViewDidLeave(){clearInterval(this.interval)}ngOnInit(){}getChats(){this.api.post("chats/getById",{id:this.id+"_"+this.uid,oid:this.id}).then(n=>{this.loaded=!0,this.yourMessage=!0,n&&200===n.status&&(this.messages=n.data,this.myContent.scrollToBottom(300))},n=>{this.loaded=!0,this.yourMessage=!0,this.util.errorToast("Algo ha ido mal")})}back(){this.navCtrl.back()}sendMessage(){if(!this.msg||""===this.msg)return!1;const n=this.msg;this.msg="";const t={room_id:this.id,uid:this.id+"_"+this.uid,from_id:this.uid,message:n,message_type:"users",status:1,timestamp:d().format("YYYY-MM-DD HH:mm:ss")};this.myContent.scrollToBottom(300),this.yourMessage=!1,this.api.post("chats/save",t).then(n=>{n&&200===n.status?this.getChats():this.yourMessage=!0},n=>{this.yourMessage=!0,this.util.errorToast("Algo ha ido mal")})}}return n.\u0275fac=function(t){return new(t||n)(g.Qb(r.a),g.Qb(s.db),g.Qb(a.a),g.Qb(c.a))},n.\u0275cmp=g.Kb({type:n,selectors:[["app-inbox"]],viewQuery:function(n,t){if(1&n&&g.Fc(s.m,1,s.m),2&n){let n;g.sc(n=g.ec())&&(t.myContent=n.first)}},decls:16,vars:6,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["style","display: flex;flex-direction: column;justify-content: center;align-items: center;",4,"ngIf"],["class","main_content_div",4,"ngIf"],["style","display: flex;flex-direction: row-reverse;padding: 20px;",4,"ngIf"],[1,"footer_div"],["type","text",3,"ngModel","placeholder","ngModelChange","keyup.enter"],[1,"chat_div",3,"click"],["name","navigate"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],["color","primary","name","crescent"],[1,"main_content_div"],[4,"ngFor","ngForOf"],["class","left_div",4,"ngIf"],["class","right_div",4,"ngIf"],[1,"left_div"],[1,"inner_div"],[1,"msg_div"],[1,"right_div"],[2,"display","flex","flex-direction","row-reverse","padding","20px"],["name","dots"]],template:function(n,t){1&n&&(g.Vb(0,"ion-header"),g.Vb(1,"ion-toolbar",0),g.Vb(2,"ion-buttons",1),g.Vb(3,"ion-button",2),g.dc("click",function(){return t.back()}),g.Rb(4,"ion-icon",3),g.Ub(),g.Ub(),g.Vb(5,"ion-title"),g.Ac(6),g.Ub(),g.Ub(),g.Ub(),g.Vb(7,"ion-content"),g.zc(8,l,2,0,"div",4),g.zc(9,p,2,1,"div",5),g.zc(10,_,2,0,"div",6),g.Ub(),g.Vb(11,"ion-footer"),g.Vb(12,"div",7),g.Vb(13,"ion-input",8),g.dc("ngModelChange",function(n){return t.msg=n})("keyup.enter",function(){return t.sendMessage()}),g.Ub(),g.Vb(14,"div",9),g.dc("click",function(){return t.sendMessage()}),g.Rb(15,"ion-icon",10),g.Ub(),g.Ub(),g.Ub()),2&n&&(g.Fb(6),g.Cc(" ",t.name," "),g.Fb(2),g.nc("ngIf",!t.loaded),g.Fb(1),g.nc("ngIf",t.loaded),g.Fb(1),g.nc("ngIf",!t.yourMessage&&t.loaded),g.Fb(3),g.nc("ngModel",t.msg)("placeholder",t.util.translate("Type Here..")))},directives:[s.s,s.X,s.h,s.g,s.t,s.W,s.m,e.j,s.q,s.u,s.kb,o.h,o.k,s.O,e.i,s.w],styles:[".header_div[_ngcontent-%COMP%]{width:100%;justify-content:space-between;height:65px;border-bottom:1px solid #d3d3d3;background-color:var(--ion-color-primary)}.header_div[_ngcontent-%COMP%], .header_div[_ngcontent-%COMP%]   .first_div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.header_div[_ngcontent-%COMP%]   .first_div[_ngcontent-%COMP%]{color:#fff;font-weight:700}.header_div[_ngcontent-%COMP%]   .back_image[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;min-width:45px;margin-right:10px}.header_div[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-weight:600;color:#fff}.header_div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.main_content_div[_ngcontent-%COMP%]{width:100%;padding:15px}.main_content_div[_ngcontent-%COMP%]   .back_image[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;min-width:45px}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]{width:100%;display:flex;margin-bottom:15px}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]   .inner_div[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:row;justify-content:flex-start}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{background:#f0eff5;display:flex;align-items:center;padding:10px 15px;border-radius:25px;margin-left:5px}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px;justify-content:flex-end}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]   .inner_div[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:row;justify-content:flex-end}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{background:var(--ion-color-primary);display:flex;align-items:center;padding:10px 15px;border-radius:25px;margin-right:5px;color:#fff}ion-footer[_ngcontent-%COMP%]   .footer_div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px}ion-footer[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border-radius:25px;border:1px solid #d3d3d3;--padding-start:8px}ion-footer[_ngcontent-%COMP%]   .chat_div[_ngcontent-%COMP%]{border-radius:50%;box-shadow:0 3px 6px rgba(0,0,0,.2);height:35px;width:35px;position:relative;margin-left:10px}ion-footer[_ngcontent-%COMP%]   .chat_div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:absolute;left:50%;top:50%;transform:translate(-55%,-45%);font-size:22px}"]}),n})()}];let m=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.Ob({type:n}),n.\u0275inj=g.Nb({imports:[[r.i.forChild(u)],r.i]}),n})(),v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.Ob({type:n}),n.\u0275inj=g.Nb({imports:[[e.b,o.e,s.Y,m]]}),n})()}}]);