(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{fhSy:function(e,n,t){"use strict";t.r(n),t.d(n,"RegisterPageModule",function(){return M});var i=t("ofXK"),o=t("3Pt+"),a=t("TEn/"),l=t("tyNb"),s=t("mrSG"),r=t("2Rin"),c=t("8RPc"),d=t("TCp9"),g=t("m/P+"),b=t("wd/R"),h=t("hxji"),m=t("fXoL");function p(e,n){1&e&&(m.Vb(0,"span"),m.Ac(1," INICIAR"),m.Ub())}function u(e,n){1&e&&m.Rb(0,"ion-spinner",46)}const f=[{path:"",component:(()=>{class e{constructor(e,n,t,i,o,a,l,s){this.router=e,this.api=n,this.util=t,this.navCtrl=i,this.modalCtrl=o,this.iab=a,this.menuController=l,this.alertController=s,this.login={email:"",first_name:"",last_name:"",password:"",gender:"1",mobile:"",fcm_token:"",type:"",lat:"",lng:"",cover:"",status:"",verified:"",others:"",date:"",stripe_key:"",cc:"",check:!1},this.submitted=!1,this.isLogin=!1,this.ccCode="+503",this.login.cc="+503"}openModal(){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.modalCtrl.create({component:d.a,componentProps:{code:this.ccCode,phone:this.login.mobile}});e.onDidDismiss().then(e=>{if(e&&"ok"===e.role){const e={first_name:this.login.first_name,last_name:this.login.last_name,email:this.login.email,password:this.login.password,gender:this.login.gender,fcm_token:localStorage.getItem("fcm")?localStorage.getItem("fcm"):"NA",type:"user",lat:"",lng:"",cover:"NA",mobile:this.login.mobile,status:1,country_code:this.ccCode,verified:0,others:1,date:b().format("YYYY-MM-DD"),stripe_key:""};this.isLogin=!0,this.api.post("users/registerUser",e).then(e=>{if(this.isLogin=!1,e&&200===e.status){this.util.userInfo=e.data,localStorage.setItem("uid",e.data.id);const n=localStorage.getItem("fcm");n&&null!==n&&"null"!==n&&this.api.post("users/edit_profile",{id:e.data.id,fcm_token:n}).then(e=>{},e=>{}),this.sendVerification(this.login.email,this.api.baseUrl+"users/verify?uid="+e.data.id),this.navCtrl.navigateRoot([""])}else this.util.errorToast(e&&500===e.status?e.data.message:"Algo ha ido mal")},e=>{this.isLogin=!1,this.util.errorToast("Algo ha ido mal")})}}),e.present()})}presentAlertConfirm(){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.alertController.create({header:"Confirmaci\xf3n",message:"Enviaremos un c\xf3digo de verificaci\xf3n a tu n\xfamero de tel\xe9fono  "+this.ccCode+this.login.mobile,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Enviar",handler:()=>{this.openModal()}}]});yield e.present()})}ngOnInit(){}onLogin(e){if(this.submitted=!0,e.valid){if(!this.login.check)return this.util.showToast("Por favor acepta nuestros t\xe9rminos y condiciones","dark","bottom"),!1;if(!/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.login.email))return this.util.showToast(this.util.translate("Please enter valid email"),"danger","bottom"),!1;if("1"===this.util.twillo){const e={email:this.login.email,phone:this.login.mobile};this.isLogin=!0,this.api.post("users/validatePhoneAndEmail",e).then(e=>{this.isLogin=!1,e&&200===e.status?this.presentAlertConfirm():this.util.errorToast(e&&500===e.status?e.data.message:"Algo ha ido mal")},e=>{this.isLogin=!1,this.util.errorToast("Algo ha ido mal")}).catch(e=>{this.isLogin=!1,this.util.errorToast("Algo ha ido mal")})}else{const e={first_name:this.login.first_name,last_name:this.login.last_name,email:this.login.email,password:this.login.password,gender:this.login.gender,fcm_token:localStorage.getItem("fcm")?localStorage.getItem("fcm"):"NA",type:"user",lat:"",lng:"",cover:"NA",mobile:this.login.mobile,status:1,country_code:this.ccCode,verified:0,others:1,date:b().format("YYYY-MM-DD"),stripe_key:""};this.isLogin=!0,this.api.post("users/registerUser",e).then(e=>{if(this.isLogin=!1,e&&200===e.status){this.util.userInfo=e.data,localStorage.setItem("uid",e.data.id);const n=localStorage.getItem("fcm");n&&null!==n&&"null"!==n&&this.api.post("users/edit_profile",{id:e.data.id,fcm_token:n}).then(e=>{},e=>{}),this.sendVerification(this.login.email,this.api.baseUrl+"users/verify?uid="+e.data.id),this.navCtrl.navigateRoot([""])}else this.util.errorToast(e&&500===e.status?e.data.message:"Algo ha ido mal")},e=>{this.isLogin=!1,this.util.errorToast("Algo ha ido mal")})}}}sendVerification(e,n){this.api.post("users/sendVerificationMail",{email:e,url:n}).then(e=>{},e=>{})}back(){this.navCtrl.back()}openCountry(){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.modalCtrl.create({component:h.a,backdropDismiss:!1,showBackdrop:!0});e.onDidDismiss().then(e=>{e&&"selected"===e.role&&(this.login.cc="+"+e.data,this.ccCode="+"+e.data)}),yield e.present()})}open(e){this.iab.create("https://terebuscas.com")}ionViewWillEnter(){this.menuController.enable(!1)}ionViewWillLeave(){this.menuController.enable(!0)}}return e.\u0275fac=function(n){return new(n||e)(m.Qb(l.g),m.Qb(c.a),m.Qb(r.a),m.Qb(a.db),m.Qb(a.cb),m.Qb(g.a),m.Qb(a.bb),m.Qb(a.b))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-register"]],decls:86,vars:23,consts:[["no-shadow","","no-border",""],["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"ion-padding"],[1,"login-logo"],["src","assets/icon.png","alt","foodies",1,"logo_icon"],[1,"login-name"],[1,"subTitle"],["novalidate",""],["loginForm","ngForm"],["lines","none"],["type","email","name","email","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["email","ngModel"],["color","danger"],[1,"ion-padding-start",3,"hidden"],["name","password","type","password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],["type","text","name","full_name","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["full_name","ngModel"],["type","text","name","lname","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["lname","ngModel"],["size","3",3,"click"],["disabled","true","type","text","name","ccode","spellcheck","false","autocapitalize","off","required","",2,"font-size","12px",3,"ngModel","ngModelChange"],["ccode","ngModel"],["size","9"],["type","number","name","mobile","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["phone","ngModel"],["okText","Okay","cancelText","Dismiss","interface","popover","name","gender","required","",3,"ngModel","ngModelChange"],["gender","ngModel"],["value","1"],["value","0"],["value","2"],[1,"div_chk"],["name","checkls","color","light",1,"chk",3,"checked","ngModel","ngModelChange"],["checkls","ngModel"],[1,"lbl_police"],[1,"span_term"],[2,"color","var(--ion-color-primary)",3,"click"],[1,"ion-no-margin","ion-no-padding"],["type","submit","expand","block",1,"btn_class",3,"disabled","click"],[4,"ngIf"],["name","circles",4,"ngIf"],[1,"createAcc",3,"click"],[1,"registerTag"],["name","circles"]],template:function(e,n){if(1&e){const e=m.Wb();m.Vb(0,"ion-header",0),m.Vb(1,"ion-toolbar",1),m.Vb(2,"ion-buttons",2),m.Vb(3,"ion-button",3),m.dc("click",function(){return n.util.back()}),m.Rb(4,"ion-icon",4),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(5,"ion-content",5),m.Vb(6,"div",6),m.Rb(7,"img",7),m.Vb(8,"p",8),m.Ac(9,"Registrarse"),m.Ub(),m.Vb(10,"p",9),m.Ac(11,"Ingresa los datos"),m.Rb(12,"br"),m.Ac(13," para acceder a tu cuenta"),m.Ub(),m.Ub(),m.Vb(14,"form",10,11),m.Vb(16,"ion-list",12),m.Vb(17,"ion-item",12),m.Vb(18,"ion-input",13,14),m.dc("ngModelChange",function(e){return n.login.email=e}),m.Ub(),m.Ub(),m.Vb(20,"ion-text",15),m.Vb(21,"p",16),m.Ac(22," Correo es requerido "),m.Ub(),m.Ub(),m.Vb(23,"ion-item",12),m.Vb(24,"ion-input",17,18),m.dc("ngModelChange",function(e){return n.login.password=e}),m.Ub(),m.Ub(),m.Vb(26,"ion-text",15),m.Vb(27,"p",16),m.Ac(28," Contrase\xf1a es requerida "),m.Ub(),m.Ub(),m.Vb(29,"ion-item",12),m.Vb(30,"ion-input",19,20),m.dc("ngModelChange",function(e){return n.login.first_name=e}),m.Ub(),m.Ub(),m.Vb(32,"ion-text",15),m.Vb(33,"p",16),m.Ac(34," Nombre es requerido "),m.Ub(),m.Ub(),m.Vb(35,"ion-item",12),m.Vb(36,"ion-input",21,22),m.dc("ngModelChange",function(e){return n.login.last_name=e}),m.Ub(),m.Ub(),m.Vb(38,"ion-text",15),m.Vb(39,"p",16),m.Ac(40," Apellido "),m.Ub(),m.Ub(),m.Vb(41,"ion-row"),m.Vb(42,"ion-col",23),m.dc("click",function(){return n.openCountry()}),m.Vb(43,"ion-item",12),m.Vb(44,"ion-input",24,25),m.dc("ngModelChange",function(e){return n.login.cc=e}),m.Ub(),m.Ub(),m.Ub(),m.Vb(46,"ion-col",26),m.Vb(47,"ion-item",12),m.Vb(48,"ion-input",27,28),m.dc("ngModelChange",function(e){return n.login.mobile=e}),m.Ub(),m.Ub(),m.Vb(50,"ion-text",15),m.Vb(51,"p",16),m.Ac(52," Tel\xe9fono es requerido "),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(53,"ion-item",12),m.Vb(54,"ion-label"),m.Ac(55,"G\xe9nero"),m.Ub(),m.Vb(56,"ion-select",29,30),m.dc("ngModelChange",function(e){return n.login.gender=e}),m.Vb(58,"ion-select-option",31),m.Ac(59," Masculino "),m.Ub(),m.Vb(60,"ion-select-option",32),m.Ac(61," Femenino "),m.Ub(),m.Vb(62,"ion-select-option",33),m.Ac(63," Otro "),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(64,"div",34),m.Vb(65,"ion-checkbox",35,36),m.dc("ngModelChange",function(e){return n.login.check=e}),m.Ub(),m.Vb(67,"ion-label",37),m.Vb(68,"span",38),m.Ac(69," Al apretar aceptar o al utilizar esta aplicaci\xf3n, est\xe1s aprobando automaticamente nuestras T\xe9rminos y Condiciones que puedes encontrar en: "),m.Ub(),m.Vb(70,"u"),m.Vb(71,"a",39),m.dc("click",function(){return n.open("privacy")}),m.Ac(72," T\xe9rminos y Condiciones "),m.Ub(),m.Ub(),m.Ac(73," de esta aplicaci\xf3n "),m.Ub(),m.Ub(),m.Vb(74,"ion-text",15),m.Vb(75,"p",16),m.Ac(76," Por favor acepta nuestras politicas de privacidad "),m.Ub(),m.Ub(),m.Vb(77,"ion-row",40),m.Vb(78,"ion-col",40),m.Vb(79,"ion-button",41),m.dc("click",function(){m.uc(e);const t=m.tc(15);return n.onLogin(t)}),m.zc(80,p,2,0,"span",42),m.zc(81,u,1,0,"ion-spinner",43),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(82,"p",44),m.dc("click",function(){return n.back()}),m.Ac(83,"Ya tengo una cuenta "),m.Vb(84,"span",45),m.Ac(85,"Iniciar sesi\xf3n"),m.Ub(),m.Ub(),m.Ub()}if(2&e){const e=m.tc(19),t=m.tc(25),i=m.tc(31),o=m.tc(37),a=m.tc(49),l=m.tc(66);m.Fb(18),m.nc("ngModel",n.login.email)("placeholder","Correo"),m.Fb(3),m.nc("hidden",e.valid||0==n.submitted),m.Fb(3),m.nc("ngModel",n.login.password)("placeholder","Contrase\xf1a"),m.Fb(3),m.nc("hidden",t.valid||0==n.submitted),m.Fb(3),m.nc("ngModel",n.login.first_name)("placeholder","Nombre"),m.Fb(3),m.nc("hidden",i.valid||0==n.submitted),m.Fb(3),m.nc("ngModel",n.login.last_name)("placeholder","Apellido"),m.Fb(3),m.nc("hidden",o.valid||0==n.submitted),m.Fb(5),m.nc("ngModel",n.login.cc),m.Fb(4),m.nc("ngModel",n.login.mobile)("placeholder","Tel\xe9fono"),m.Fb(3),m.nc("hidden",a.valid||0==n.submitted),m.Fb(5),m.nc("ngModel",n.login.gender),m.Fb(9),m.nc("checked",n.login.check)("ngModel",n.login.check),m.Fb(10),m.nc("hidden",l.valid||0==n.submitted),m.Fb(4),m.nc("disabled",n.isLogin),m.Fb(1),m.nc("ngIf",!n.isLogin),m.Fb(1),m.nc("ngIf",n.isLogin)}},directives:[a.s,a.X,a.h,a.g,a.t,a.m,o.o,o.i,o.j,a.x,a.v,a.u,a.kb,o.n,o.h,o.k,a.T,a.F,a.l,a.fb,a.w,a.J,a.jb,a.K,a.k,a.c,i.j,a.O],styles:[".login-logo[_ngcontent-%COMP%]{text-align:center;right:0;left:0;margin:30% auto 20px}.login-logo[_ngcontent-%COMP%]   .logo_icon[_ngcontent-%COMP%]{width:110px!important}.login-logo[_ngcontent-%COMP%]   .login-name[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.login-logo[_ngcontent-%COMP%]   .subTitle[_ngcontent-%COMP%]{margin:0;font-size:1rem}.frgTag[_ngcontent-%COMP%]{text-align:right;color:var(--ion-color-primary)}.btn_class[_ngcontent-%COMP%]{color:#fff;height:50px;--border-radius:5px;margin-top:15px}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px}.list[_ngcontent-%COMP%]{margin-bottom:0}ion-list[_ngcontent-%COMP%]{--ion-background-color:transparent;margin:0}ion-item[_ngcontent-%COMP%]{--ion-background-color:#f3f3f3;border-radius:5px!important;margin-top:10px}.createAcc[_ngcontent-%COMP%]{text-align:center}.createAcc[_ngcontent-%COMP%]   .registerTag[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700}.div_chk[_ngcontent-%COMP%]{width:100%;margin:20px 0;position:relative}.div_chk[_ngcontent-%COMP%]   .lbl_police[_ngcontent-%COMP%]{font-size:10px;margin-left:40px;position:absolute;top:50%;transform:translateY(-50%)}.div_chk[_ngcontent-%COMP%]   .span_term[_ngcontent-%COMP%]{margin-right:10px}.div_chk[_ngcontent-%COMP%]   .chk[_ngcontent-%COMP%]{--size:20px;--border-radius:5px!important;--border-color-checked:var(--ion-color-primary)}.div_chk[_ngcontent-%COMP%]   .lbl_by[_ngcontent-%COMP%]{display:block;font-size:10px;color:#000;margin-top:10px}.div_chk[_ngcontent-%COMP%]   .span_termm[_ngcontent-%COMP%]{color:#8992aa;margin-right:10px}"]}),e})()}];let C=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=m.Ob({type:e}),e.\u0275inj=m.Nb({imports:[[l.i.forChild(f)],l.i]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=m.Ob({type:e}),e.\u0275inj=m.Nb({imports:[[i.b,o.e,a.Y,C]]}),e})()}}]);