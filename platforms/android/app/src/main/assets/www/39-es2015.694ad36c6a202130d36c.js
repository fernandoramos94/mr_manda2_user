(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"1AGm":function(t,n,i){"use strict";i.r(n),i.d(n,"HistoryDetailPageModule",function(){return $});var e=i("ofXK"),c=i("3Pt+"),o=i("TEn/"),a=i("tyNb"),s=i("mrSG"),r=i("8RPc"),l=i("2Rin"),d=i("PSD3"),b=i.n(d),u=i("wd/R"),g=i("m/P+"),h=i("fXoL");function _(t,n){1&t&&(h.Vb(0,"div",9),h.Rb(1,"ion-spinner",10),h.Ub())}function f(t,n){if(1&t){const t=h.Wb();h.Vb(0,"ion-label",27),h.dc("click",function(){return h.uc(t),h.hc(2).trackMyOrder()}),h.Ac(1," Rastrear pedido "),h.Ub()}}function p(t,n){if(1&t&&(h.Vb(0,"p",34),h.Ac(1),h.Ub()),2&t){const t=h.hc().$implicit,n=h.hc(4);h.Fb(1),h.Dc(" ",n.util.currecny," ",t.value," ")}}function m(t,n){if(1&t&&(h.Vb(0,"p",34),h.Ac(1),h.Ub()),2&t){const t=h.hc().$implicit,n=h.hc(4);h.Fb(1),h.Dc(" ",t.value," ",n.util.currecny," ")}}function v(t,n){if(1&t&&(h.Vb(0,"div",33),h.Vb(1,"p",34),h.Ac(2),h.Ub(),h.zc(3,p,2,2,"p",35),h.zc(4,m,2,2,"p",35),h.Ub()),2&t){const t=n.$implicit,i=h.hc(4);h.Fb(2),h.Cc(" - ",t.name," "),h.Fb(1),h.nc("ngIf","left"===i.util.cside),h.Fb(1),h.nc("ngIf","right"===i.util.cside)}}function C(t,n){if(1&t&&(h.Vb(0,"div",30),h.Vb(1,"ion-label",31),h.Ac(2),h.Ub(),h.zc(3,v,5,3,"div",32),h.Ub()),2&t){const t=n.$implicit,i=n.index,e=h.hc().$implicit;h.Fb(2),h.Dc(" ",e.name," X ",e.selectedItem[i].total,""),h.Fb(1),h.nc("ngForOf",t.item)}}function O(t,n){if(1&t&&(h.Vb(0,"ion-label",38),h.Ac(1),h.Ub()),2&t){const t=h.hc(2).$implicit,n=h.hc(2);h.Fb(1),h.Dc("",n.util.currecny," ",t.quantiy*t.price," ")}}function P(t,n){if(1&t&&(h.Vb(0,"ion-label",38),h.Ac(1),h.Ub()),2&t){const t=h.hc(2).$implicit,n=h.hc(2);h.Fb(1),h.Dc(" ",t.quantiy*t.price," ",n.util.currecny," ")}}function x(t,n){if(1&t&&(h.Vb(0,"div",36),h.Vb(1,"div",15),h.Vb(2,"ion-label",31),h.Ac(3),h.Ub(),h.zc(4,O,2,2,"ion-label",37),h.zc(5,P,2,2,"ion-label",37),h.Ub(),h.Ub()),2&t){const t=h.hc().$implicit,n=h.hc(2);h.Fb(3),h.Dc("",t.name," X ",t.quantiy," "),h.Fb(1),h.nc("ngIf","left"===n.util.cside),h.Fb(1),h.nc("ngIf","right"===n.util.cside)}}function M(t,n){if(1&t&&(h.Vb(0,"span"),h.zc(1,C,4,3,"div",28),h.zc(2,x,6,4,"div",29),h.Ub()),2&t){const t=n.$implicit;h.Fb(1),h.nc("ngForOf",t.selectedItem),h.Fb(1),h.nc("ngIf",!t.selectedItem||!t.selectedItem.length)}}function y(t,n){if(1&t&&(h.Vb(0,"span",39),h.Ac(1),h.Ub()),2&t){const t=h.hc(2);h.Fb(1),h.Dc("",t.util.currecny," ",t.total,"")}}function F(t,n){if(1&t&&(h.Vb(0,"span",39),h.Ac(1),h.Ub()),2&t){const t=h.hc(2);h.Fb(1),h.Dc("",t.total," ",t.util.currecny,"")}}function U(t,n){if(1&t&&(h.Vb(0,"span",39),h.Ac(1),h.Ub()),2&t){const t=h.hc(3);h.Fb(1),h.Dc("",t.util.currecny," ",t.dicount,"")}}function V(t,n){if(1&t&&(h.Vb(0,"span",39),h.Ac(1),h.Ub()),2&t){const t=h.hc(3);h.Fb(1),h.Dc("",t.dicount," ",t.util.currecny,"")}}function w(t,n){if(1&t&&(h.Vb(0,"ion-label",19),h.Ac(1,"Cup\xf3n "),h.zc(2,U,2,2,"span",20),h.zc(3,V,2,2,"span",20),h.Ub()),2&t){const t=h.hc(2);h.Fb(2),h.nc("ngIf","left"===t.util.cside),h.Fb(1),h.nc("ngIf","right"===t.util.cside)}}function A(t,n){if(1&t&&(h.Vb(0,"span",39),h.Ac(1),h.Ub()),2&t){const t=h.hc(2);h.Fb(1),h.Dc("",t.util.currecny," ",t.delivery_charge,"")}}function I(t,n){if(1&t&&(h.Vb(0,"span",39),h.Ac(1),h.Ub()),2&t){const t=h.hc(2);h.Fb(1),h.Dc("",t.delivery_charge," ",t.util.currecny,"")}}function z(t,n){if(1&t&&(h.Vb(0,"span",39),h.Ac(1),h.Ub()),2&t){const t=h.hc(2);h.Fb(1),h.Dc("",t.util.currecny," ",t.grandTotal,"")}}function k(t,n){if(1&t&&(h.Vb(0,"span",39),h.Ac(1),h.Ub()),2&t){const t=h.hc(2);h.Fb(1),h.Dc("",t.grandTotal," ",t.util.currecny,"")}}function N(t,n){if(1&t){const t=h.Wb();h.Vb(0,"ion-label",40),h.dc("click",function(){return h.uc(t),h.hc(2).call()}),h.Ac(1," Llamar a Mr Manda2 "),h.Ub()}}function D(t,n){if(1&t){const t=h.Wb();h.Vb(0,"ion-label",40),h.dc("click",function(){return h.uc(t),h.hc(2).driverCall()}),h.Ac(1),h.Ub()}if(2&t){const t=h.hc(2);h.Fb(1),h.Cc(" Llamar al repartidor ",t.driverName,"")}}function T(t,n){if(1&t&&(h.Vb(0,"div",11),h.Vb(1,"ion-label",12),h.Ac(2,"Resumen del pedido"),h.Ub(),h.Vb(3,"ion-label",13),h.Ac(4),h.Ub(),h.Rb(5,"div",14),h.Vb(6,"ion-label",13),h.Ac(7),h.Ub(),h.Vb(8,"div",15),h.Vb(9,"ion-label",16),h.Ac(10,"Tu \xf3rden"),h.Ub(),h.zc(11,f,2,0,"ion-label",17),h.Ub(),h.zc(12,M,3,2,"span",18),h.Vb(13,"ion-label",19),h.Ac(14,"Total productos "),h.zc(15,y,2,2,"span",20),h.zc(16,F,2,2,"span",20),h.Ub(),h.zc(17,w,4,2,"ion-label",21),h.Vb(18,"ion-label",22),h.Ac(19,"Cargo por env\xedo "),h.zc(20,A,2,2,"span",20),h.zc(21,I,2,2,"span",20),h.Ub(),h.Vb(22,"ion-label",22),h.Ac(23,"Total "),h.zc(24,z,2,2,"span",20),h.zc(25,k,2,2,"span",20),h.Ub(),h.Rb(26,"div",14),h.Vb(27,"ion-label",23),h.Ac(28,"Detalles del pedido"),h.Ub(),h.Rb(29,"div",14),h.Vb(30,"ion-label",24),h.Ac(31,"N\xfamero del pedido"),h.Ub(),h.Vb(32,"ion-label",25),h.Ac(33),h.Ub(),h.Vb(34,"ion-label",24),h.Ac(35,"Notas"),h.Ub(),h.Vb(36,"ion-label",25),h.Ac(37),h.Ub(),h.Vb(38,"ion-label",24),h.Ac(39,"Fecha"),h.Ub(),h.Vb(40,"ion-label",25),h.Ac(41),h.Ub(),h.Vb(42,"ion-label",24),h.Ac(43,"Entregar en"),h.Ub(),h.Vb(44,"ion-label",25),h.Ac(45),h.Ub(),h.Rb(46,"div",14),h.zc(47,N,2,0,"ion-label",26),h.zc(48,D,2,1,"ion-label",26),h.Ub()),2&t){const t=h.hc();h.Fb(4),h.Dc("Tu pedido en ",t.restName," ha sido ",t.status," "),h.Fb(3),h.Bc(t.address),h.Fb(4),h.nc("ngIf","en camino"==t.status||"aceptada"==t.status),h.Fb(1),h.nc("ngForOf",t.orders),h.Fb(3),h.nc("ngIf","left"===t.util.cside),h.Fb(1),h.nc("ngIf","right"===t.util.cside),h.Fb(1),h.nc("ngIf",t.coupon),h.Fb(3),h.nc("ngIf","left"===t.util.cside),h.Fb(1),h.nc("ngIf","right"===t.util.cside),h.Fb(3),h.nc("ngIf","left"===t.util.cside),h.Fb(1),h.nc("ngIf","right"===t.util.cside),h.Fb(8),h.Cc("#",t.id,""),h.Fb(4),h.Bc(t.orderNotes),h.Fb(4),h.Bc(t.time),h.Fb(4),h.Bc(t.deliveryAddress),h.Fb(2),h.nc("ngIf","creada"==t.status||"en camino"==t.status||"accepted"==t.status),h.Fb(1),h.nc("ngIf","en camino"==t.status||""==t.status)}}function S(t,n){if(1&t){const t=h.Wb();h.Vb(0,"ion-button",41),h.dc("click",function(){return h.uc(t),h.hc().presentAlertConfirm()}),h.Rb(1,"ion-icon",42),h.Ac(2," Calificar pedido "),h.Ub()}}function j(t,n){if(1&t){const t=h.Wb();h.Vb(0,"ion-button",43),h.dc("click",function(){return h.uc(t),h.hc().changeStatus()}),h.Ac(1," Cancelar pedido "),h.Ub()}}const R=[{path:"",component:(()=>{class t{constructor(t,n,i,e,c,o,a){this.route=t,this.api=n,this.router=i,this.util=e,this.alertController=c,this.navCtrl=o,this.iab=a,this.orders=[],this.coupon=!1,this.orderNotes="",this.delivery_charge=0,this.loaded=!1}ngOnInit(){this.route.queryParams.subscribe(t=>{t.hasOwnProperty("id")&&(this.id=t.id,this.getOrder())})}getOrder(){this.api.post("orders/getById",{id:this.id}).then(t=>{if(this.loaded=!0,t&&200===t.status&&t.data.length){const n=t.data[0];if(this.util.orderDetails=n,this.grandTotal=n.grand_total,this.serviceTax=n.serviceTax,this.orders=JSON.parse(n.orders),this.status=n.status,this.time=u(n.time).format("llll"),this.total=n.total,this.paid=n.pay_method,this.delivery_charge=n.delivery_charge,this.address=n.str_address,this.restName=n.str_name,n&&n.did&&"0"!==n.did&&(this.dId=n.did,this.getDriverInfo()),this.coupon="1"===n.applied_coupon,this.dicount=n.discount,this.restPhone=n.str_mobile,this.restFCM=n.str_fcm_token,n&&n.address){const t=JSON.parse(n.address);this.deliveryAddress=t.house+" "+t.landmark+" "+t.address+t.pincode}this.orderNotes=n.notes}else this.util.back()},t=>{this.loaded=!0,this.util.errorToast("Something went wrong")}).catch(t=>{this.loaded=!0,this.util.errorToast("Something went wrong")})}presentAlertConfirm(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Qu\xe9 tal tu experiencia?",message:"Califica al comercio "+this.restName+" y a tu repartidor "+this.driverName,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Si",handler:()=>{this.router.navigate(["rate"])}}]});yield t.present()})}trackMyOrder(){this.router.navigate(["/tracker"],{queryParams:{id:this.id}})}call(){this.restPhone&&this.iab.create("tel:55 54613890","_system")}getDriverInfo(){this.api.post("drivers/getById",{id:this.dId}).then(t=>{if(t&&200===t.status&&t.data.length){const n=t.data[0];this.util.orderDetails.driverInfo=n,this.driverName=n.first_name+" "+n.last_name,this.driverMobile=n.mobile,this.driverCover=n.cover,this.driverFCM=n.fcm_token}},t=>{this.util.errorToast("Something went wrong")}).catch(t=>{this.util.errorToast("Something went wrong")})}driverCall(){this.driverMobile?this.iab.create("tel:"+this.driverMobile,"_system"):this.util.errorToast(this.util.translate("Number not found"))}chat(){const t={queryParams:{id:0,name:"Support",uid:localStorage.getItem("uid")}};this.router.navigate(["inbox"],t)}changeStatus(){b.a.fire({title:"Est\xe1s seguro?",text:"Cancelar tu pedido",showCancelButton:!0,cancelButtonText:"Cancelar",showConfirmButton:!0,confirmButtonText:"Si",backdrop:!1,background:"white"}).then(t=>{if(t&&t.value){const t="cancelada",n={id:this.id,status:t};this.util.show(this.util.translate("Please wait")),this.api.post("orders/editList",n).then(n=>{n&&200===n.status?this.dId&&""!==this.dId&&"0"!==this.dId?this.api.post("drivers/edit_profile",{id:this.dId,current:"active"}).then(n=>{n&&200===n.status?(this.util.hide(),this.api.sendNotification(this.util.translate("Order statuts changed "),this.util.translate("Order statuts changed"),this.driverFCM),b.a.fire({title:this.util.translate("success"),text:this.util.translate("Order status changed to ")+t,icon:"success",timer:2e3,backdrop:!1,background:"white"}),this.navCtrl.back()):(this.util.hide(),this.util.errorToast("Algo ha ido mal"),this.navCtrl.back())},t=>{this.util.hide(),this.util.errorToast("Algo ha ido mal")}).catch(t=>{this.util.hide(),this.util.errorToast("Algo ha ido mal")}):(this.util.hide(),this.navCtrl.back()):(this.util.hide(),this.util.errorToast("Algo ha ido mal"),this.navCtrl.back())},t=>{this.util.hide(),this.util.errorToast("Algo ha ido mal")}).catch(t=>{this.util.hide(),this.util.errorToast("Algo ha ido mal")})}})}}return t.\u0275fac=function(n){return new(n||t)(h.Qb(a.a),h.Qb(r.a),h.Qb(a.g),h.Qb(l.a),h.Qb(o.b),h.Qb(o.db),h.Qb(g.a))},t.\u0275cmp=h.Kb({type:t,selectors:[["app-history-detail"]],decls:15,vars:5,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["style","display: flex;flex-direction: column;justify-content: center;align-items: center;",4,"ngIf"],["class","main_content_div",4,"ngIf"],[1,"btn_div"],["size","small","class","ratae",3,"click",4,"ngIf"],["size","small","class","reject",3,"click",4,"ngIf"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],["color","primary","name","crescent"],[1,"main_content_div"],[1,"header_lbl"],[1,"res_location"],[1,"line_div"],[1,"flex_div"],[1,"res_name",2,"margin-top","0px"],["class","fav_lbl",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"margin-top","5px","font-weight","600px"],["class","prise_lbl",4,"ngIf"],["style","margin-top: 5px; font-weight: 600px;",4,"ngIf"],[2,"margin-top","5px","font-size","14px"],[1,"res_name"],[1,"head_gray"],[1,"small_lbl"],["class","red_lbl",3,"click",4,"ngIf"],[1,"fav_lbl",3,"click"],["class","subNames",4,"ngFor","ngForOf"],["class","card_div",4,"ngIf"],[1,"subNames"],[1,"food_title"],["class","flex_titles",4,"ngFor","ngForOf"],[1,"flex_titles"],[1,"sub_name"],["class","sub_name",4,"ngIf"],[1,"card_div"],["class","food_price",4,"ngIf"],[1,"food_price"],[1,"prise_lbl"],[1,"red_lbl",3,"click"],["size","small",1,"ratae",3,"click"],["name","star","color","light","slot","start"],["size","small",1,"reject",3,"click"]],template:function(t,n){1&t&&(h.Vb(0,"ion-header"),h.Vb(1,"ion-toolbar",0),h.Vb(2,"ion-buttons",1),h.Vb(3,"ion-button",2),h.dc("click",function(){return n.util.back()}),h.Rb(4,"ion-icon",3),h.Ub(),h.Ub(),h.Vb(5,"ion-title"),h.Ac(6),h.Ub(),h.Ub(),h.Ub(),h.Vb(7,"ion-content"),h.zc(8,_,2,0,"div",4),h.zc(9,T,49,18,"div",5),h.Ub(),h.Vb(10,"ion-footer"),h.Vb(11,"ion-toolbar"),h.Vb(12,"div",6),h.zc(13,S,3,0,"ion-button",7),h.zc(14,j,2,0,"ion-button",8),h.Ub(),h.Ub(),h.Ub()),2&t&&(h.Fb(6),h.Cc("Detalles de la \xf3rden #",n.id," "),h.Fb(2),h.nc("ngIf",!n.loaded),h.Fb(1),h.nc("ngIf",n.loaded),h.Fb(4),h.nc("ngIf","delivered"===n.status),h.Fb(1),h.nc("ngIf","created"===n.status||"ongoing"===n.status||"accepted"===n.status))},directives:[o.s,o.X,o.h,o.g,o.t,o.W,o.m,e.j,o.q,o.O,o.w,e.i],styles:[".header_div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header_div[_ngcontent-%COMP%]   .support_lbl[_ngcontent-%COMP%]{margin-right:20px;color:#00b3f0}.main_content_div[_ngcontent-%COMP%]{width:100%;padding:20px}.main_content_div[_ngcontent-%COMP%]   .line_div[_ngcontent-%COMP%]{height:1px;width:100%;background:#d3d3d3;margin-top:10px;margin-bottom:10px}.main_content_div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block}.main_content_div[_ngcontent-%COMP%]   .header_lbl[_ngcontent-%COMP%]{font-weight:600;font-size:22px}.main_content_div[_ngcontent-%COMP%]   .res_name[_ngcontent-%COMP%]{margin-top:20px;font-weight:600;font-size:18px}.main_content_div[_ngcontent-%COMP%]   .res_location[_ngcontent-%COMP%]{font-size:14px;width:90%}.main_content_div[_ngcontent-%COMP%]   .flex_div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px}.main_content_div[_ngcontent-%COMP%]   .flex_div[_ngcontent-%COMP%]   .food_title[_ngcontent-%COMP%]{font-size:15px;font-weight:700}.main_content_div[_ngcontent-%COMP%]   .flex_div[_ngcontent-%COMP%]   .food_price[_ngcontent-%COMP%]{font-size:15px}.main_content_div[_ngcontent-%COMP%]   .flex_div[_ngcontent-%COMP%]   .fav_lbl[_ngcontent-%COMP%]{color:#00b3f0;font-size:12px;border:1px solid #00b3f0;border-radius:25px;padding:2px 10px}.main_content_div[_ngcontent-%COMP%]   .subNames[_ngcontent-%COMP%]{border-bottom:1px dashed #d3d3d3;padding-bottom:5px}.main_content_div[_ngcontent-%COMP%]   .subNames[_ngcontent-%COMP%]   .food_title[_ngcontent-%COMP%]{font-size:15px;font-weight:700}.main_content_div[_ngcontent-%COMP%]   .subNames[_ngcontent-%COMP%]   .food_title[_ngcontent-%COMP%]   .veg[_ngcontent-%COMP%]{height:12px;width:12px}.main_content_div[_ngcontent-%COMP%]   .subNames[_ngcontent-%COMP%]   .food_title[_ngcontent-%COMP%]   .rate_lbl[_ngcontent-%COMP%]{background:#b2d9b2;border:1px solid #7bdb7b;padding:3px 8px;border-radius:5px;font-size:14px;font-weight:600}.main_content_div[_ngcontent-%COMP%]   .subNames[_ngcontent-%COMP%]   .flex_titles[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.main_content_div[_ngcontent-%COMP%]   .subNames[_ngcontent-%COMP%]   .flex_titles[_ngcontent-%COMP%]   .sub_name[_ngcontent-%COMP%]{margin:0;color:#000;font-size:12px}.main_content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]{border-bottom:1px dashed #d3d3d3;padding-bottom:5px}.main_content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .upper_div[_ngcontent-%COMP%]{display:flex;align-items:center}.main_content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .upper_div[_ngcontent-%COMP%]   .veg[_ngcontent-%COMP%]{width:12px;height:12px}.main_content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;align-items:center}.main_content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .lower_div[_ngcontent-%COMP%]   .rate_lbl[_ngcontent-%COMP%]{background:#b2d9b2;border:1px solid #7bdb7b;padding:3px 8px;border-radius:5px;font-size:14px;font-weight:600}.main_content_div[_ngcontent-%COMP%]   .prise_lbl[_ngcontent-%COMP%]{position:absolute;right:20px}.main_content_div[_ngcontent-%COMP%]   .head_gray[_ngcontent-%COMP%]{color:gray;font-size:13px}.main_content_div[_ngcontent-%COMP%]   .small_lbl[_ngcontent-%COMP%]{font-size:12px;font-weight:600;margin-bottom:15px}.main_content_div[_ngcontent-%COMP%]   .red_lbl[_ngcontent-%COMP%]{color:#00b3f0;text-align:center;margin-top:20px;margin-bottom:20px}.btn_div[_ngcontent-%COMP%]{display:flex;justify-content:center}.btn_div[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-weight:600;--border-radius:5px;width:130px}.btn_div[_ngcontent-%COMP%]   .ratae[_ngcontent-%COMP%]{--background:var(--ion-color-warning)}"]}),t})()}];let B=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({imports:[[a.i.forChild(R)],a.i]}),t})(),$=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({imports:[[e.b,c.e,o.Y,B]]}),t})()}}]);