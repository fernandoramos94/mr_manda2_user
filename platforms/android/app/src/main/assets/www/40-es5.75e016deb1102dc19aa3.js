!function(){function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"+duN":function(e,i,o){"use strict";o.r(i),o.d(i,"InboxPageModule",function(){return O});var r=o("ofXK"),a=o("3Pt+"),c=o("TEn/"),d=o("tyNb"),s=o("2Rin"),g=o("wd/R"),l=o("8RPc"),f=o("fXoL");function b(n,t){1&n&&(f.Vb(0,"div",11),f.Rb(1,"ion-spinner",12),f.Ub())}function u(n,t){if(1&n&&(f.Vb(0,"div",17),f.Vb(1,"div",18),f.Vb(2,"div",19),f.Vb(3,"ion-label"),f.Ac(4),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&n){var e=f.hc().$implicit;f.Fb(4),f.Bc(e.message)}}function p(n,t){if(1&n&&(f.Vb(0,"div",20),f.Vb(1,"div",18),f.Vb(2,"div",19),f.Vb(3,"ion-label"),f.Ac(4),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&n){var e=f.hc().$implicit;f.Fb(4),f.Bc(e.message)}}function _(n,t){if(1&n&&(f.Vb(0,"span"),f.zc(1,u,5,1,"div",15),f.zc(2,p,5,1,"div",16),f.Ub()),2&n){var e=t.$implicit,i=f.hc(2);f.Fb(1),f.nc("ngIf",e.from_id!=i.uid),f.Fb(1),f.nc("ngIf",e.from_id==i.uid)}}function v(n,t){if(1&n&&(f.Vb(0,"div",13),f.zc(1,_,3,2,"span",14),f.Ub()),2&n){var e=f.hc();f.Fb(1),f.nc("ngForOf",e.messages)}}function h(n,t){1&n&&(f.Vb(0,"div",21),f.Rb(1,"ion-spinner",22),f.Ub())}var m,x,y,M=[{path:"",component:(m=function(){function e(t,i,o,r){var a=this;n(this,e),this.route=t,this.navCtrl=i,this.api=o,this.util=r,this.msg="",this.messages=[],this.route.queryParams.subscribe(function(n){n&&n.id&&n.name?(a.uid=n.uid,a.id=n.id,a.loaded=!1,a.name=n.name,a.getChats(),a.interval=setInterval(function(){a.getChats()},12e3)):a.navCtrl.back()})}var i,o,r;return i=e,(o=[{key:"ionViewDidLeave",value:function(){clearInterval(this.interval)}},{key:"ngOnInit",value:function(){}},{key:"getChats",value:function(){var n=this;this.api.post("chats/getById",{id:this.id+"_"+this.uid,oid:this.id}).then(function(t){n.loaded=!0,n.yourMessage=!0,t&&200===t.status&&(n.messages=t.data,n.myContent.scrollToBottom(300))},function(t){n.loaded=!0,n.yourMessage=!0,n.util.errorToast("Algo ha ido mal")})}},{key:"back",value:function(){this.navCtrl.back()}},{key:"sendMessage",value:function(){var n=this;if(!this.msg||""===this.msg)return!1;var t=this.msg;this.msg="";var e={room_id:this.id,uid:this.id+"_"+this.uid,from_id:this.uid,message:t,message_type:"users",status:1,timestamp:g().format("YYYY-MM-DD HH:mm:ss")};this.myContent.scrollToBottom(300),this.yourMessage=!1,this.api.post("chats/save",e).then(function(t){t&&200===t.status?n.getChats():n.yourMessage=!0},function(t){n.yourMessage=!0,n.util.errorToast("Algo ha ido mal")})}}])&&t(i.prototype,o),r&&t(i,r),e}(),m.\u0275fac=function(n){return new(n||m)(f.Qb(d.a),f.Qb(c.db),f.Qb(l.a),f.Qb(s.a))},m.\u0275cmp=f.Kb({type:m,selectors:[["app-inbox"]],viewQuery:function(n,t){var e;1&n&&f.Fc(c.m,1,c.m),2&n&&f.sc(e=f.ec())&&(t.myContent=e.first)},decls:16,vars:6,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["style","display: flex;flex-direction: column;justify-content: center;align-items: center;",4,"ngIf"],["class","main_content_div",4,"ngIf"],["style","display: flex;flex-direction: row-reverse;padding: 20px;",4,"ngIf"],[1,"footer_div"],["type","text",3,"ngModel","placeholder","ngModelChange","keyup.enter"],[1,"chat_div",3,"click"],["name","navigate"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],["color","primary","name","crescent"],[1,"main_content_div"],[4,"ngFor","ngForOf"],["class","left_div",4,"ngIf"],["class","right_div",4,"ngIf"],[1,"left_div"],[1,"inner_div"],[1,"msg_div"],[1,"right_div"],[2,"display","flex","flex-direction","row-reverse","padding","20px"],["name","dots"]],template:function(n,t){1&n&&(f.Vb(0,"ion-header"),f.Vb(1,"ion-toolbar",0),f.Vb(2,"ion-buttons",1),f.Vb(3,"ion-button",2),f.dc("click",function(){return t.back()}),f.Rb(4,"ion-icon",3),f.Ub(),f.Ub(),f.Vb(5,"ion-title"),f.Ac(6),f.Ub(),f.Ub(),f.Ub(),f.Vb(7,"ion-content"),f.zc(8,b,2,0,"div",4),f.zc(9,v,2,1,"div",5),f.zc(10,h,2,0,"div",6),f.Ub(),f.Vb(11,"ion-footer"),f.Vb(12,"div",7),f.Vb(13,"ion-input",8),f.dc("ngModelChange",function(n){return t.msg=n})("keyup.enter",function(){return t.sendMessage()}),f.Ub(),f.Vb(14,"div",9),f.dc("click",function(){return t.sendMessage()}),f.Rb(15,"ion-icon",10),f.Ub(),f.Ub(),f.Ub()),2&n&&(f.Fb(6),f.Cc(" ",t.name," "),f.Fb(2),f.nc("ngIf",!t.loaded),f.Fb(1),f.nc("ngIf",t.loaded),f.Fb(1),f.nc("ngIf",!t.yourMessage&&t.loaded),f.Fb(3),f.nc("ngModel",t.msg)("placeholder",t.util.translate("Type Here..")))},directives:[c.s,c.X,c.h,c.g,c.t,c.W,c.m,r.j,c.q,c.u,c.kb,a.h,a.k,c.O,r.i,c.w],styles:[".header_div[_ngcontent-%COMP%]{width:100%;justify-content:space-between;height:65px;border-bottom:1px solid #d3d3d3;background-color:var(--ion-color-primary)}.header_div[_ngcontent-%COMP%], .header_div[_ngcontent-%COMP%]   .first_div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.header_div[_ngcontent-%COMP%]   .first_div[_ngcontent-%COMP%]{color:#fff;font-weight:700}.header_div[_ngcontent-%COMP%]   .back_image[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;min-width:45px;margin-right:10px}.header_div[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-weight:600;color:#fff}.header_div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.main_content_div[_ngcontent-%COMP%]{width:100%;padding:15px}.main_content_div[_ngcontent-%COMP%]   .back_image[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;min-width:45px}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]{width:100%;display:flex;margin-bottom:15px}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]   .inner_div[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:row;justify-content:flex-start}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{background:#f0eff5;display:flex;align-items:center;padding:10px 15px;border-radius:25px;margin-left:5px}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px;justify-content:flex-end}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]   .inner_div[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:row;justify-content:flex-end}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{background:var(--ion-color-primary);display:flex;align-items:center;padding:10px 15px;border-radius:25px;margin-right:5px;color:#fff}ion-footer[_ngcontent-%COMP%]   .footer_div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px}ion-footer[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border-radius:25px;border:1px solid #d3d3d3;--padding-start:8px}ion-footer[_ngcontent-%COMP%]   .chat_div[_ngcontent-%COMP%]{border-radius:50%;box-shadow:0 3px 6px rgba(0,0,0,.2);height:35px;width:35px;position:relative;margin-left:10px}ion-footer[_ngcontent-%COMP%]   .chat_div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:absolute;left:50%;top:50%;transform:translate(-55%,-45%);font-size:22px}"]}),m)}],C=((y=function t(){n(this,t)}).\u0275fac=function(n){return new(n||y)},y.\u0275mod=f.Ob({type:y}),y.\u0275inj=f.Nb({imports:[[d.i.forChild(M)],d.i]}),y),O=((x=function t(){n(this,t)}).\u0275fac=function(n){return new(n||x)},x.\u0275mod=f.Ob({type:x}),x.\u0275inj=f.Nb({imports:[[r.b,a.e,c.Y,C]]}),x)}}])}();