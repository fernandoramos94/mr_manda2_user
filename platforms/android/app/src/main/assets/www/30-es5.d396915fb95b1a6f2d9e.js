!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{PMNr:function(o,n,i){"use strict";i.r(n),i.d(n,"AddNewAddressPageModule",function(){return M});var a=i("ofXK"),r=i("3Pt+"),s=i("TEn/"),l=i("tyNb"),d=i("mrSG"),c=i("WOgW"),u=i("Bfh1"),g=i("8RPc"),m=i("2Rin"),h=i("fXoL"),p=["map"],b=["autocompletesearch"];function f(e,t){if(1&e){var o=h.Wb();h.Vb(0,"ion-button",20),h.dc("click",function(){return h.uc(o),h.hc().addAddress()}),h.Ac(1," A\xf1adir "),h.Ub()}}function v(e,t){if(1&e){var o=h.Wb();h.Vb(0,"ion-button",20),h.dc("click",function(){return h.uc(o),h.hc().updateAddress()}),h.Ac(1," Actualizar "),h.Ub()}}var k,y,A,w=[{path:"",component:(k=function(){function o(t,n,i,a,r,s,l,d){var c=this;e(this,o),this.platform=t,this.androidPermissions=n,this.geolocation=i,this.navCtrl=a,this.api=r,this.util=s,this.route=l,this.router=d,this.house="",this.landmark="",this.title="home",this.autocompleteItems1=[],this.route.queryParams.subscribe(function(e){if(e&&e.from){c.from="edit";var t=JSON.parse(e.data);c.address=t.address,c.house=t.house,c.id=t.id,c.landmark=t.landmark,c.lat=t.lat,c.lng=t.lng,c.loadmap(c.lat,c.lng,c.mapEle)}else c.from="new",c.getLocation()})}var n,i,a;return n=o,(i=[{key:"ngOnInit",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}},{key:"ionViewWillEnter",value:function(){var e=this,t=document.getElementById("googlePlaces").getElementsByTagName("input")[0],o=new google.maps.places.Autocomplete(t,{fields:["geometry","icon","name"],strictBounds:!1});google.maps.event.addListener(o,"place_changed",function(){var t=o.getPlace(),n=new google.maps.LatLng(t.geometry.location.lat(),t.geometry.location.lng());e.lat=t.geometry.location.lat(),e.lng=t.geometry.location.lng(),e.addMarker(n),e.map.setCenter(n)})}},{key:"getLocation",value:function(){var e=this;this.platform.ready().then(function(){e.platform.is("android")?(e.androidPermissions.checkPermission(e.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION).then(function(e){return console.log("Has permission?",e.hasPermission)},function(t){return e.androidPermissions.requestPermission(e.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION)}),e.grantRequest()):e.platform.is("ios")?e.grantRequest():e.geolocation.getCurrentPosition({maximumAge:3e3,timeout:1e4,enableHighAccuracy:!1}).then(function(t){t&&(e.lat=t.coords.latitude,e.lng=t.coords.longitude,e.loadmap(t.coords.latitude,t.coords.longitude,e.mapEle),e.getAddress(e.lat,e.lng))})})}},{key:"onSearchChange",value:function(e){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.GoogleAutocomplete.getPlacePredictions({input:this.address},function(e,o){e&&e.length>0&&(t.autocompleteItems1=e)});case 1:case"end":return e.stop()}},e,this)}))}},{key:"grantRequest",value:function(){var e=this;this.geolocation.getCurrentPosition({maximumAge:3e3,timeout:1e4,enableHighAccuracy:!1}).then(function(t){t&&(e.loadmap(t.coords.latitude,t.coords.longitude,e.mapEle),e.getAddress(t.coords.latitude,t.coords.longitude))})}},{key:"loadmap",value:function(e,t,o){var n=new google.maps.LatLng(e,t),i={zoom:15,scaleControl:!1,streetViewControl:!1,zoomControl:!1,overviewMapControl:!1,center:n,mapTypeControl:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"Foodfire5"]}};this.map=new google.maps.Map(o.nativeElement,i);var a=new google.maps.StyledMapType([{featureType:"all",elementType:"all",stylers:[{saturation:-100}]}],{name:"Grayscale"});this.map.mapTypes.set("Foodfire5",a),this.map.setMapTypeId("Foodfire5"),this.addMarker(n)}},{key:"getAddress",value:function(e,t){var o=this,n=new google.maps.Geocoder,i=new google.maps.LatLng(e,t);n.geocode({location:i},function(n,i){o.address=n[0].formatted_address,o.lat=e,o.lng=t})}},{key:"addMarker",value:function(e){var t=this;null!=this.marker&&this.marker.setMap(null);var o={url:"assets/icon/marker.png",scaledSize:new google.maps.Size(50,50)};this.marker=new google.maps.Marker({position:e,map:this.map,icon:o,draggable:!0,animation:google.maps.Animation.DROP}),google.maps.event.addListener(this.marker,"dragend",function(){t.getDragAddress(t.marker)})}},{key:"getDragAddress",value:function(e){var t=this,o=new google.maps.Geocoder,n=new google.maps.LatLng(e.position.lat(),e.position.lng());o.geocode({location:n},function(o,n){t.address=o[0].formatted_address,t.lat=e.position.lat(),t.lng=e.position.lng()})}},{key:"addAddress",value:function(){var e=this;if(""===this.address||""===this.landmark||""===this.house)return this.util.errorToast(this.util.translate("Todos los campos son requerido")),!1;this.util.show();var t={uid:localStorage.getItem("uid"),address:this.address,lat:this.lat,lng:this.lng,title:this.title,house:this.house,landmark:this.landmark};this.api.post("address/save",t).then(function(t){e.util.hide(),t&&200===t.status?(e.util.publishAddress(""),e.navCtrl.back(),e.util.showToast("Direccion agregada","success","bottom")):e.util.errorToast("Algo ha ido mal")},function(t){e.util.hide(),e.util.errorToast("Algo ha ido mal")})}},{key:"updateAddress",value:function(){var e=this;if(""===this.address||""===this.landmark||""===this.house)return this.util.errorToast("Todos los campos son requeridos"),!1;this.util.show();var t={id:this.id,uid:localStorage.getItem("uid"),address:this.address,lat:this.lat,lng:this.lng,title:this.title,house:this.house,landmark:this.landmark};this.api.post("address/editList",t).then(function(t){e.util.hide(),t&&200===t.status?(e.util.publishAddress(""),e.navCtrl.back(),e.util.showToast("Direcci\xf3n actualizada","success","bottom")):e.util.errorToast("Algo ha ido mal")},function(t){e.util.hide(),e.util.errorToast("Algo ha ido mal")})}}])&&t(n.prototype,i),a&&t(n,a),o}(),k.\u0275fac=function(e){return new(e||k)(h.Qb(s.gb),h.Qb(c.a),h.Qb(u.a),h.Qb(s.db),h.Qb(g.a),h.Qb(m.a),h.Qb(l.a),h.Qb(l.g))},k.\u0275cmp=h.Kb({type:k,selectors:[["app-add-new-address"]],viewQuery:function(e,t){var o;1&e&&(h.Fc(p,3),h.Fc(b,3)),2&e&&(h.sc(o=h.ec())&&(t.mapEle=o.first),h.sc(o=h.ec())&&(t.autoCompleteS=o.first))},decls:44,vars:6,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"div_map"],["map",""],[1,"informations"],["position","stacked"],["id","googlePlaces",3,"ngModel","ngModelChange"],["autocompletesearch",""],[3,"ngModel","ngModelChange"],["mode","md",3,"ngModel","ngModelChange"],[1,"title"],[2,"margin-top","20px"],["name","home-outline","slot","start"],["value","casa"],["name","briefcase-outline","slot","start"],["value","oficina"],["name","navigate-outline","slot","start"],["value","otro"],["expand","block",3,"click",4,"ngIf"],["expand","block",3,"click"]],template:function(e,t){1&e&&(h.Vb(0,"ion-header"),h.Vb(1,"ion-toolbar"),h.Vb(2,"ion-buttons",0),h.Vb(3,"ion-button",1),h.dc("click",function(){return t.util.back()}),h.Rb(4,"ion-icon",2),h.Ub(),h.Ub(),h.Vb(5,"ion-title"),h.Ac(6,"A\xf1adir nueva direcci\xf3n"),h.Ub(),h.Ub(),h.Ub(),h.Vb(7,"ion-content"),h.Rb(8,"div",3,4),h.Vb(10,"div",5),h.Vb(11,"ion-item"),h.Vb(12,"ion-label",6),h.Ac(13,"Ubicaci\xf3n"),h.Ub(),h.Vb(14,"ion-input",7,8),h.dc("ngModelChange",function(e){return t.address=e}),h.Ub(),h.Ub(),h.Vb(16,"ion-item"),h.Vb(17,"ion-label",6),h.Ac(18,"N\xfamero de casa"),h.Ub(),h.Vb(19,"ion-input",9),h.dc("ngModelChange",function(e){return t.house=e}),h.Ub(),h.Ub(),h.Vb(20,"ion-item"),h.Vb(21,"ion-label",6),h.Ac(22,"Punto de referencia"),h.Ub(),h.Vb(23,"ion-input",9),h.dc("ngModelChange",function(e){return t.landmark=e}),h.Ub(),h.Ub(),h.Vb(24,"ion-radio-group",10),h.dc("ngModelChange",function(e){return t.title=e}),h.Vb(25,"ion-label",11),h.Ac(26," Guardar como "),h.Ub(),h.Vb(27,"ion-item",12),h.Rb(28,"ion-icon",13),h.Vb(29,"ion-label"),h.Ac(30,"Casa"),h.Ub(),h.Rb(31,"ion-radio",14),h.Ub(),h.Vb(32,"ion-item"),h.Rb(33,"ion-icon",15),h.Vb(34,"ion-label"),h.Ac(35,"Oficina"),h.Ub(),h.Rb(36,"ion-radio",16),h.Ub(),h.Vb(37,"ion-item"),h.Rb(38,"ion-icon",17),h.Vb(39,"ion-label"),h.Ac(40,"Otro"),h.Ub(),h.Rb(41,"ion-radio",18),h.Ub(),h.Ub(),h.zc(42,f,2,0,"ion-button",19),h.zc(43,v,2,0,"ion-button",19),h.Ub(),h.Ub()),2&e&&(h.Fb(14),h.nc("ngModel",t.address),h.Fb(5),h.nc("ngModel",t.house),h.Fb(4),h.nc("ngModel",t.landmark),h.Fb(1),h.nc("ngModel",t.title),h.Fb(18),h.nc("ngIf","new"===t.from),h.Fb(1),h.nc("ngIf","edit"===t.from))},directives:[s.s,s.X,s.h,s.g,s.t,s.W,s.m,s.v,s.w,s.u,s.kb,r.h,r.k,s.A,s.jb,s.z,s.ib,a.j],styles:[".div_map[_ngcontent-%COMP%]{height:50vh;width:100%;border:1px solid gray}.informations[_ngcontent-%COMP%]{padding:16px}.informations[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start:0px}.informations[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:gray}.informations[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:block;font-weight:700;margin-top:15px}.informations[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:5px;margin-top:20px}"]}),k)}],C=((A=function t(){e(this,t)}).\u0275fac=function(e){return new(e||A)},A.\u0275mod=h.Ob({type:A}),A.\u0275inj=h.Nb({imports:[[l.i.forChild(w)],l.i]}),A),M=((y=function t(){e(this,t)}).\u0275fac=function(e){return new(e||y)},y.\u0275mod=h.Ob({type:y}),y.\u0275inj=h.Nb({imports:[[a.b,r.e,s.Y,C]]}),y)}}])}();