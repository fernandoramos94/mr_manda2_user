(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{k578:function(t,n,i){"use strict";i.r(n),i.d(n,"EditProfilePageModule",function(){return _});var e=i("ofXK"),o=i("3Pt+"),a=i("TEn/"),c=i("tyNb"),r=i("mrSG"),l=i("2Rin"),s=i("a/9d"),d=i("8RPc"),h=i("fXoL");function b(t,n){if(1&t){const t=h.Wb();h.Vb(0,"ion-button",2),h.dc("click",function(){h.uc(t);const n=h.hc();return n.edit_flag=!n.edit_flag}),h.Rb(1,"ion-icon",18),h.Ub()}}function u(t,n){if(1&t){const t=h.Wb();h.Vb(0,"ion-button",2),h.dc("click",function(){return h.uc(t),h.hc().update()}),h.Rb(1,"ion-icon",19),h.Ub()}}const g=function(t){return{"background-image":t}},p=[{path:"",component:(()=>{class t{constructor(t,n,i,e,o){this.api=t,this.util=n,this.navCtrl=i,this.actionSheetController=e,this.camera=o,this.cover="",this.edit_flag=!0,this.getProfile()}ngOnInit(){}getProfile(){const t={id:localStorage.getItem("uid")};this.util.show(),this.api.post("users/getById",t).then(t=>{if(this.util.hide(),t&&200===t.status&&t.data&&t.data.length){const n=t.data[0];this.util.userInfo=n,this.fname=n.first_name,this.lname=n.last_name,this.mobile=n.mobile,this.gender=n.gender,this.cover=n.cover,this.email=n.email}},t=>{this.util.hide(),this.util.errorToast("Algo ha ido mal")})}updateProfile(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.actionSheetController.create({header:this.util.translate("Choose from"),buttons:[{text:this.util.translate("Camera"),icon:"camera",handler:()=>{this.upload("camera")}},{text:this.util.translate("Gallery"),icon:"images",handler:()=>{this.upload("gallery")}},{text:this.util.translate("Cancel"),icon:"close",role:"cancel",handler:()=>{}}]});yield t.present()})}update(){if(!this.fname||""===this.fname||!this.lname||""===this.lname||!this.mobile||""===this.mobile)return this.util.errorToast(this.util.translate("All Fields are required")),!1;const t={first_name:this.fname,last_name:this.lname,email:this.email,gender:this.gender,cover:this.cover,mobile:this.mobile,id:localStorage.getItem("uid")};this.util.show(this.util.translate("updating...")),this.api.post("users/edit_profile",t).then(t=>{this.util.hide(),this.getProfile()},t=>{this.util.hide(),this.util.errorToast("Algo ha ido mal")})}back(){this.navCtrl.back()}upload(t){try{this.camera.getPicture({quality:100,targetHeight:800,targetWidth:800,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0,sourceType:"camera"===t?this.camera.PictureSourceType.CAMERA:this.camera.PictureSourceType.PHOTOLIBRARY}).then(t=>{this.util.show("uploading"),this.api.nativePost("users/upload_file",{img:t,type:"jpg"}).then(t=>{this.util.hide();const n=JSON.parse(t.data);this.cover=n.data;const i={cover:this.cover,id:localStorage.getItem("uid")};this.util.show(this.util.translate("updating...")),this.api.post("users/edit_profile",i).then(t=>{this.util.hide()},t=>{this.util.hide(),this.util.errorToast("Algo ha ido mal")})},t=>{this.util.hide(),this.util.errorToast("Algo ha ido mal")}).catch(t=>{this.util.hide(),this.util.errorToast("Algo ha ido mal")})})}catch(n){this.util.errorToast("Algo ha ido mal")}}}return t.\u0275fac=function(n){return new(n||t)(h.Qb(d.a),h.Qb(l.a),h.Qb(a.db),h.Qb(a.a),h.Qb(s.a))},t.\u0275cmp=h.Kb({type:t,selectors:[["app-edit-profile"]],decls:43,vars:17,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"t"],["slot","end"],[3,"click",4,"ngIf"],[1,"main_content_div"],[1,"main_div"],[1,"info_div"],[1,"user_img",3,"ngStyle","click"],[1,"name"],[1,"image_div"],["name","person-outline"],[1,"content_div"],["type","text",3,"disabled","placeholder","ngModel","ngModelChange"],["name","mail-outline"],["name","call-outline"],["slot","icon-only","name","pencil"],["slot","icon-only","name","checkmark"]],template:function(t,n){1&t&&(h.Vb(0,"ion-header"),h.Vb(1,"ion-toolbar",0),h.Vb(2,"ion-buttons",1),h.Vb(3,"ion-button",2),h.dc("click",function(){return n.util.back()}),h.Rb(4,"ion-icon",3),h.Ub(),h.Ub(),h.Vb(5,"ion-title",4),h.Ac(6," Perfil "),h.Ub(),h.Vb(7,"ion-buttons",5),h.zc(8,b,2,0,"ion-button",6),h.zc(9,u,2,0,"ion-button",6),h.Ub(),h.Ub(),h.Ub(),h.Vb(10,"ion-content"),h.Vb(11,"div",7),h.Vb(12,"div",8),h.Vb(13,"div",9),h.Vb(14,"div",10),h.dc("click",function(){return n.updateProfile()}),h.Ub(),h.Vb(15,"div",11),h.Vb(16,"div",12),h.Rb(17,"ion-icon",13),h.Ub(),h.Vb(18,"div",14),h.Vb(19,"span"),h.Ac(20,"Nombre \xa0- "),h.Ub(),h.Vb(21,"ion-input",15),h.dc("ngModelChange",function(t){return n.fname=t}),h.Ub(),h.Ub(),h.Ub(),h.Vb(22,"div",11),h.Vb(23,"div",12),h.Rb(24,"ion-icon",13),h.Ub(),h.Vb(25,"div",14),h.Vb(26,"span"),h.Ac(27,"Apellido \xa0- "),h.Ub(),h.Vb(28,"ion-input",15),h.dc("ngModelChange",function(t){return n.lname=t}),h.Ub(),h.Ub(),h.Ub(),h.Vb(29,"div",11),h.Vb(30,"div",12),h.Rb(31,"ion-icon",16),h.Ub(),h.Vb(32,"div",14),h.Vb(33,"span"),h.Ac(34,"Correo \xa0- "),h.Ub(),h.Vb(35,"ion-input",15),h.dc("ngModelChange",function(t){return n.email=t}),h.Ub(),h.Ub(),h.Ub(),h.Vb(36,"div",11),h.Vb(37,"div",12),h.Rb(38,"ion-icon",17),h.Ub(),h.Vb(39,"div",14),h.Vb(40,"span"),h.Ac(41,"Tel\xe9fono \xa0- "),h.Ub(),h.Vb(42,"ion-input",15),h.dc("ngModelChange",function(t){return n.mobile=t}),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub()),2&t&&(h.Fb(8),h.nc("ngIf",n.edit_flag),h.Fb(1),h.nc("ngIf",!n.edit_flag),h.Fb(5),h.nc("ngStyle",h.rc(15,g,"url("+n.api.mediaURL+n.cover+"),url(assets/placeholder.jpg)")),h.Fb(7),h.nc("disabled",n.edit_flag)("placeholder","Nombre")("ngModel",n.fname),h.Fb(7),h.nc("disabled",n.edit_flag)("placeholder","Apellido")("ngModel",n.lname),h.Fb(7),h.nc("disabled",!0)("placeholder","Correo")("ngModel",n.email),h.Fb(7),h.nc("disabled",n.edit_flag)("placeholder","Tel\xe9fono")("ngModel",n.mobile))},directives:[a.s,a.X,a.h,a.g,a.t,a.W,e.j,a.m,e.k,a.u,a.kb,o.h,o.k],styles:["ion-button[_ngcontent-%COMP%]   .img_search[_ngcontent-%COMP%]{width:12px;margin-right:10px}.main_content_div[_ngcontent-%COMP%]{padding:20px}.main_content_div[_ngcontent-%COMP%]   .main_div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:60vh;justify-content:space-between}.main_content_div[_ngcontent-%COMP%]   .user_img[_ngcontent-%COMP%]{height:90px;width:90px;border-radius:50%;border:3px solid var(--ion-color-primary);margin:auto auto 30px;background-position:50%;background-repeat:no-repeat;background-size:cover;min-width:90px;position:relative}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 0 20px -3px rgba(30,98,255,.3);display:flex;flex-direction:row;padding:10px;justify-content:flex-start;position:relative;height:45px;margin-bottom:20px}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]{width:20px;position:relative}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .icn[_ngcontent-%COMP%]{max-width:15px;position:absolute;top:50%;transform:translateY(-50%)}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]{position:relative;display:flex;flex-flow:row;margin-left:15px}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;color:#8992aa;padding-top:5px}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:11px;color:#454d62}.main_content_div[_ngcontent-%COMP%]   .btn_div[_ngcontent-%COMP%]{display:block;width:100%;text-align:center}.main_content_div[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background:var(--ion-color-primary);--border-radius:3px;--color:#fff;font-weight:700;font-size:12px;height:40px;width:150px;text-transform:capitalize;--background-activated:rgba(159,201,165,0.5);--color-actived:#fff}.main_content_div[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   .logout_icon[_ngcontent-%COMP%]{width:12px}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({imports:[[c.i.forChild(p)],c.i]}),t})(),_=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({imports:[[e.b,o.e,a.Y,m]]}),t})()}}]);