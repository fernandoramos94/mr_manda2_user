(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{Ityv:function(n,t,o){"use strict";o.r(t),o.d(t,"ForgotPageModule",function(){return x});var i=o("ofXK"),e=o("3Pt+"),s=o("TEn/"),r=o("tyNb"),a=o("mrSG"),c=o("2Rin"),d=o("8RPc"),l=o("hxji"),h=o("TCp9"),g=o("fXoL");function b(n,t){1&n&&(g.Vb(0,"span"),g.Ac(1," Restaurar "),g.Ub())}function u(n,t){1&n&&g.Rb(0,"ion-spinner",15)}function p(n,t){if(1&n){const n=g.Wb();g.Vb(0,"div"),g.Vb(1,"ion-input",11),g.dc("ngModelChange",function(t){return g.uc(n),g.hc(2).email=t}),g.Rb(2,"ion-icon",12),g.Ub(),g.Vb(3,"ion-button",13),g.dc("click",function(){return g.uc(n),g.hc(2).sendOTP()}),g.zc(4,b,2,0,"span",10),g.zc(5,u,1,0,"ion-spinner",14),g.Ub(),g.Ub()}if(2&n){const n=g.hc(2);g.Fb(1),g.nc("placeholder","Correo")("ngModel",n.email),g.Fb(2),g.nc("disabled",n.loggedIn),g.Fb(1),g.nc("ngIf",!n.loggedIn),g.Fb(1),g.nc("ngIf",n.loggedIn)}}function f(n,t){1&n&&(g.Vb(0,"span"),g.Ac(1," Verificar "),g.Ub())}function m(n,t){1&n&&g.Rb(0,"ion-spinner",15)}function _(n,t){if(1&n){const n=g.Wb();g.Vb(0,"div"),g.Vb(1,"ion-input",16),g.dc("ngModelChange",function(t){return g.uc(n),g.hc(2).otp=t}),g.Rb(2,"ion-icon",17),g.Ub(),g.Vb(3,"ion-button",13),g.dc("click",function(){return g.uc(n),g.hc(2).verifyOTP()}),g.zc(4,f,2,0,"span",10),g.zc(5,m,1,0,"ion-spinner",14),g.Ub(),g.Ub()}if(2&n){const n=g.hc(2);g.Fb(1),g.nc("placeholder","C\xf3digo")("ngModel",n.otp),g.Fb(2),g.nc("disabled",n.loggedIn),g.Fb(1),g.nc("ngIf",!n.loggedIn),g.Fb(1),g.nc("ngIf",n.loggedIn)}}function v(n,t){1&n&&(g.Vb(0,"span"),g.Ac(1," Restaurar "),g.Ub())}function C(n,t){1&n&&g.Rb(0,"ion-spinner",15)}function M(n,t){if(1&n){const n=g.Wb();g.Vb(0,"div"),g.Vb(1,"ion-input",18),g.dc("ngModelChange",function(t){return g.uc(n),g.hc(2).password=t}),g.Rb(2,"ion-icon",17),g.Ub(),g.Vb(3,"ion-input",18),g.dc("ngModelChange",function(t){return g.uc(n),g.hc(2).repass=t}),g.Rb(4,"ion-icon",17),g.Ub(),g.Vb(5,"ion-button",13),g.dc("click",function(){return g.uc(n),g.hc(2).sendEmail()}),g.zc(6,v,2,0,"span",10),g.zc(7,C,1,0,"ion-spinner",14),g.Ub(),g.Ub()}if(2&n){const n=g.hc(2);g.Fb(1),g.nc("placeholder","Nueva contrase\xe1")("ngModel",n.password),g.Fb(2),g.nc("placeholder","Confirmar contrase\xf1a")("ngModel",n.repass),g.Fb(2),g.nc("disabled",n.loggedIn),g.Fb(1),g.nc("ngIf",!n.loggedIn),g.Fb(1),g.nc("ngIf",n.loggedIn)}}function P(n,t){if(1&n&&(g.Vb(0,"div",8),g.Vb(1,"ion-label",9),g.Ac(2," Restaurar contrase\xf1a"),g.Ub(),g.zc(3,p,6,5,"div",10),g.zc(4,_,6,5,"div",10),g.zc(5,M,8,7,"div",10),g.Ub()),2&n){const n=g.hc();g.Fb(3),g.nc("ngIf",1===n.div_type),g.Fb(1),g.nc("ngIf",2===n.div_type),g.Fb(1),g.nc("ngIf",3===n.div_type)}}function I(n,t){1&n&&(g.Vb(0,"span"),g.Ac(1," Enviar c\xf3digo "),g.Ub())}function w(n,t){1&n&&g.Rb(0,"ion-spinner",15)}function O(n,t){if(1&n){const n=g.Wb();g.Vb(0,"div"),g.Vb(1,"ion-row"),g.Vb(2,"ion-col",19),g.dc("click",function(){return g.uc(n),g.hc(2).openCountry()}),g.Vb(3,"ion-input",20),g.dc("ngModelChange",function(t){return g.uc(n),g.hc(2).cc=t}),g.Ub(),g.Ub(),g.Vb(4,"ion-col",21),g.Vb(5,"ion-input",22),g.dc("ngModelChange",function(t){return g.uc(n),g.hc(2).phone=t}),g.Ub(),g.Ub(),g.Ub(),g.Vb(6,"ion-button",13),g.dc("click",function(){return g.uc(n),g.hc(2).sendOTPOnMobile()}),g.zc(7,I,2,0,"span",10),g.zc(8,w,1,0,"ion-spinner",14),g.Ub(),g.Ub()}if(2&n){const n=g.hc(2);g.Fb(3),g.nc("ngModel",n.cc),g.Fb(2),g.nc("ngModel",n.phone)("placeholder","Tel\xe9fono"),g.Fb(1),g.nc("disabled",n.loggedIn),g.Fb(1),g.nc("ngIf",!n.loggedIn),g.Fb(1),g.nc("ngIf",n.loggedIn)}}function y(n,t){if(1&n&&(g.Vb(0,"span"),g.Ac(1),g.Ub()),2&n){const n=g.hc(3);g.Fb(1),g.Cc(" ",n.util.translate("Reset Password")," ")}}function V(n,t){1&n&&g.Rb(0,"ion-spinner",15)}function U(n,t){if(1&n){const n=g.Wb();g.Vb(0,"div"),g.Vb(1,"ion-input",18),g.dc("ngModelChange",function(t){return g.uc(n),g.hc(2).password=t}),g.Rb(2,"ion-icon",17),g.Ub(),g.Vb(3,"ion-input",18),g.dc("ngModelChange",function(t){return g.uc(n),g.hc(2).repass=t}),g.Rb(4,"ion-icon",17),g.Ub(),g.Vb(5,"ion-button",13),g.dc("click",function(){return g.uc(n),g.hc(2).resetPasswordWithPhone()}),g.zc(6,y,2,1,"span",10),g.zc(7,V,1,0,"ion-spinner",14),g.Ub(),g.Ub()}if(2&n){const n=g.hc(2);g.Fb(1),g.nc("placeholder",n.util.translate("New Password"))("ngModel",n.password),g.Fb(2),g.nc("placeholder",n.util.translate("Confirm Password"))("ngModel",n.repass),g.Fb(2),g.nc("disabled",n.loggedIn),g.Fb(1),g.nc("ngIf",!n.loggedIn),g.Fb(1),g.nc("ngIf",n.loggedIn)}}function F(n,t){if(1&n&&(g.Vb(0,"div",8),g.Vb(1,"ion-label",9),g.Ac(2),g.Ub(),g.zc(3,O,9,6,"div",10),g.zc(4,U,8,7,"div",10),g.Ub()),2&n){const n=g.hc();g.Fb(2),g.Cc(" ",n.util.translate("Reset Password")," "),g.Fb(1),g.nc("ngIf",1===n.div_type),g.Fb(1),g.nc("ngIf",3===n.div_type)}}const T=[{path:"",component:(()=>{class n{constructor(n,t,o,i,e,s){this.api=n,this.util=t,this.navCtrl=o,this.menuController=i,this.modalController=e,this.alertController=s,this.cc="+91",this.ccCode="+91",this.div_type=1,this.sent=!1,this.email="",this.otp="",this.password="",this.repass="",this.verified=!1}ngOnInit(){}sendOTP(){return this.email?/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.email)?(this.loggedIn=!0,void this.api.post("users/sendOTP",{email:this.email}).then(n=>{if(this.loggedIn=!1,!n||200!==n.status)return n&&500===n.status&&n.data&&n.data.message?(this.util.errorToast(n.data.message),!1):(this.util.errorToast("Algo ha ido mal"),!1);this.id=n.data.id,this.loggedIn=!1,this.div_type=2},n=>{this.loggedIn=!1,this.util.errorToast("Algo ha ido mal")})):(this.util.showToast(this.util.translate("Please enter valid email"),"dark","bottom"),!1):(this.util.showToast(this.util.translate("email is required"),"dark","bottom"),!1)}verifyOTP(){if(!this.otp||""===this.otp)return this.util.showToast(this.util.translate("otp is required"),"dark","bottom"),!1;this.loggedIn=!0,this.api.post("users/verifyOTP",{id:this.id,otp:this.otp}).then(n=>{if(this.loggedIn=!1,!n||200!==n.status)return n&&500===n.status&&n.data&&n.data.message?(this.util.errorToast(n.data.message),!1):(this.util.errorToast("Algo ha ido mal"),!1);this.loggedIn=!1,this.div_type=3},n=>{this.loggedIn=!1,this.util.errorToast("Algo ha ido mal")})}sendEmail(){if(!this.password||!this.repass||""===this.password||""===this.repass)return this.util.errorToast(this.util.translate("All Field are required")),!1;const n={email:this.email,pwd:this.password};this.loggedIn=!0,this.api.post("users/update_password",n).then(n=>{if(this.loggedIn=!1,!n||200!==n.status)return n&&500===n.status&&n.data&&n.data.message?(this.util.errorToast(n.data.message),!1):(this.util.errorToast("Algo ha ido mal"),!1);this.loggedIn=!1,this.util.errorToast(this.util.translate("Password Updated")),this.back()},n=>{this.loggedIn=!1,this.util.errorToast("Algo ha ido mal")})}resetPasswordWithPhone(){if(!this.password||!this.repass||""===this.password||""===this.repass)return this.util.errorToast(this.util.translate("All Field are required")),!1;const n={phone:this.phone,pwd:this.password};this.loggedIn=!0,this.api.post("users/resetPasswordWithPhone",n).then(n=>{if(this.loggedIn=!1,!n||200!==n.status)return n&&500===n.status&&n.data&&n.data.message?(this.util.errorToast(n.data.message),!1):(this.util.errorToast("Algo ha ido mal"),!1);this.loggedIn=!1,this.util.errorToast(this.util.translate("Password Updated")),this.back()},n=>{this.loggedIn=!1,this.util.errorToast("Algo ha ido mal")})}back(){this.navCtrl.back()}ionViewWillEnter(){this.menuController.enable(!1)}ionViewWillLeave(){this.menuController.enable(!0)}openCountry(){return Object(a.a)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:l.a,backdropDismiss:!1,showBackdrop:!0});n.onDidDismiss().then(n=>{n&&"selected"===n.role&&(this.cc="+"+n.data,this.ccCode="+"+n.data)}),yield n.present()})}sendOTPOnMobile(){const n={phone:this.phone};this.loggedIn=!0,this.api.post("users/validatePhoneForReset",n).then(n=>{this.loggedIn=!1,n&&200===n.status?this.presentAlertConfirm():this.util.errorToast(n&&500===n.status?n.data.message:"Algo ha ido mal")},n=>{this.loggedIn=!1,this.util.errorToast("Algo ha ido mal")}).catch(n=>{this.loggedIn=!1,this.util.errorToast("Algo ha ido mal")})}presentAlertConfirm(){return Object(a.a)(this,void 0,void 0,function*(){const n=yield this.alertController.create({header:"Confirm Informations",message:"We will send verification code to your mobile number  "+this.ccCode+this.phone,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Send",handler:()=>{this.openModal()}}]});yield n.present()})}openModal(){return Object(a.a)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:h.a,componentProps:{code:this.ccCode,phone:this.phone}});n.onDidDismiss().then(n=>{n&&"ok"===n.role&&(this.div_type=3)}),n.present()})}}return n.\u0275fac=function(t){return new(t||n)(g.Qb(d.a),g.Qb(c.a),g.Qb(s.db),g.Qb(s.bb),g.Qb(s.cb),g.Qb(s.b))},n.\u0275cmp=g.Kb({type:n,selectors:[["app-forgot"]],decls:13,vars:2,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"main_content_div"],[1,"iconDiv"],["src","assets/icon.png","alt","",1,"icon"],["class","form_div",4,"ngIf"],[1,"form_div"],[1,"main_head"],[4,"ngIf"],["type","email",3,"placeholder","ngModel","ngModelChange"],["name","mail","slot","icon-only"],["expand","block",3,"disabled","click"],["name","circular",4,"ngIf"],["name","circular"],["type","number",3,"placeholder","ngModel","ngModelChange"],["name","key","slot","icon-only"],["type","password",3,"placeholder","ngModel","ngModelChange"],["size","3",3,"click"],["disabled","true","type","text",2,"font-size","12px",3,"ngModel","ngModelChange"],["size","9"],["type","number",3,"ngModel","placeholder","ngModelChange"]],template:function(n,t){1&n&&(g.Vb(0,"ion-header"),g.Vb(1,"ion-toolbar",0),g.Vb(2,"ion-buttons",1),g.Vb(3,"ion-button",2),g.dc("click",function(){return t.util.back()}),g.Rb(4,"ion-icon",3),g.Ub(),g.Ub(),g.Vb(5,"ion-title"),g.Ac(6,"Restaurar contrase\xf1a"),g.Ub(),g.Ub(),g.Ub(),g.Vb(7,"ion-content"),g.Vb(8,"div",4),g.Vb(9,"div",5),g.Rb(10,"img",6),g.Ub(),g.zc(11,P,6,3,"div",7),g.zc(12,F,5,3,"div",7),g.Ub(),g.Ub()),2&n&&(g.Fb(11),g.nc("ngIf","0"===t.util.reset_pwd),g.Fb(1),g.nc("ngIf","1"===t.util.reset_pwd))},directives:[s.s,s.X,s.h,s.g,s.t,s.W,s.m,i.j,s.w,s.u,s.kb,e.h,e.k,s.O,s.fb,s.F,s.l],styles:[".main_content_div[_ngcontent-%COMP%]{width:100%;padding:30px;position:absolute;top:45%;left:50%;transform:translate(-50%,-50%)}.main_content_div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:20px;padding:10px}.main_content_div[_ngcontent-%COMP%]   .iconDiv[_ngcontent-%COMP%]{text-align:center}.main_content_div[_ngcontent-%COMP%]   .iconDiv[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:60px}.main_content_div[_ngcontent-%COMP%]   .form_div[_ngcontent-%COMP%]{padding:25px;position:relative}.main_content_div[_ngcontent-%COMP%]   .form_div[_ngcontent-%COMP%]   .main_head[_ngcontent-%COMP%]{display:block;color:var(--ion-color-primary);font-weight:600;font-size:30px;margin:10px}.main_content_div[_ngcontent-%COMP%]   .form_div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px;color:#fff}.main_content_div[_ngcontent-%COMP%]   .form_div[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]{display:block;text-align:center;color:#fff}.main_content_div[_ngcontent-%COMP%]   .form_div[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border-radius:20px;margin-bottom:15px;--padding-start:8px;--padding-end:10px;border:1px solid #d3d3d3}.main_content_div[_ngcontent-%COMP%]   .form_div[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:20px;--border-radius:20px;--background:var(--ion-color-primary);--color:#fff}.main_content_div[_ngcontent-%COMP%]   .form_div[_ngcontent-%COMP%]   .tri[_ngcontent-%COMP%]{width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-bottom:15px solid #fff;position:absolute;top:-15px}.main_content_div[_ngcontent-%COMP%]   .form_div[_ngcontent-%COMP%]   .lbl[_ngcontent-%COMP%]{margin-top:20px;color:#fff;display:block;text-align:center}.main_content_div[_ngcontent-%COMP%]   .form_div[_ngcontent-%COMP%]   .signup_span[_ngcontent-%COMP%]{color:#fff;font-weight:600;font-size:14px}"]}),n})()}];let k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.Ob({type:n}),n.\u0275inj=g.Nb({imports:[[r.i.forChild(T)],r.i]}),n})(),x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.Ob({type:n}),n.\u0275inj=g.Nb({imports:[[i.b,e.e,s.Y,k]]}),n})()}}]);