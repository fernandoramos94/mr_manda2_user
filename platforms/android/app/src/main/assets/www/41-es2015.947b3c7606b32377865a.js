(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{lPJH:function(t,e,i){"use strict";i.r(e),i.d(e,"LocationPageModule",function(){return p});var o=i("ofXK"),n=i("3Pt+"),s=i("TEn/"),r=i("tyNb"),a=i("mrSG"),c=i("WOgW"),l=i("Bfh1"),d=i("mtRb"),h=i("2Rin"),u=i("yHma"),g=i("fXoL");const b=[{path:"",component:(()=>{class t{constructor(t,e,i,o,n,s,r,a,c,l){this.platform=t,this.androidPermissions=e,this.geolocation=i,this.router=o,this.util=n,this.alertController=s,this.navCtrl=r,this.menuController=a,this.diagnostic=c,this.locationService=l}ngOnInit(){}getLocation(){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.locationService.getLocationCoordinates();t&&this.getAddress(t.lat,t.lng)})}checkPermissions(){return Object(a.a)(this,void 0,void 0,function*(){if(yield this.locationService.checkGPSPermission()){const t=yield this.locationService.askToTurnOnGPS();this.postGPSPermission(t)}else{const t=yield this.locationService.requestGPSPermission();if("CAN_REQUEST"===t||"GOT_PERMISSION"===t){const t=yield this.locationService.askToTurnOnGPS();this.postGPSPermission(t)}else this.util.errorToast("User denied location permission")}})}postGPSPermission(t){return Object(a.a)(this,void 0,void 0,function*(){})}askPermission(){this.getLocation()}grantRequest(){this.diagnostic.isLocationEnabled().then(t=>{t||this.diagnostic.switchToSettings(),this.geolocation.getCurrentPosition({maximumAge:3e3,timeout:1e4,enableHighAccuracy:!1}).then(t=>{t&&(this.lat=t.coords.latitude,this.lng=t.coords.longitude,this.getAddress(t.coords.latitude,t.coords.longitude))}).catch(t=>{this.diagnostic.switchToSettings()})},t=>{this.platform.is("ios")?this.iOSAlert():this.presentAlertConfirm()}).catch(t=>{this.platform.is("ios")?this.iOSAlert():this.presentAlertConfirm()})}getAddress(t,e){const i=new google.maps.Geocoder,o=new google.maps.LatLng(t,e);i.geocode({location:o},(i,o)=>{i&&i.length?(this.lat=t,this.lng=e,localStorage.setItem("location","true"),localStorage.setItem("lat",this.lat),localStorage.setItem("address",i[0].formatted_address),localStorage.setItem("lng",this.lng),this.util.cityAddress=i[0].formatted_address,this.util.publishLocation(),this.navCtrl.navigateRoot([""])):this.util.errorToast("Something went wrong please try again later")})}iOSAlert(){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Alert",message:"Por favor activa tu servicio de ubicaci\xf3n para brindarte un mejor servicio",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Ok",handler:()=>{this.diagnostic.switchToSettings()}}]});yield t.present()})}presentAlertConfirm(){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Alert",message:"Por favor activa tu servicio de ubicaci\xf3n para brindarte un mejor servicio",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Okay",handler:()=>{this.askPermission()}}]});yield t.present()})}customLocation(){return Object(a.a)(this,void 0,void 0,function*(){this.router.navigate(["pick-location"])})}ionViewWillEnter(){this.menuController.enable(!1)}ionViewWillLeave(){this.menuController.enable(!0)}}return t.\u0275fac=function(e){return new(e||t)(g.Qb(s.gb),g.Qb(c.a),g.Qb(l.a),g.Qb(r.g),g.Qb(h.a),g.Qb(s.b),g.Qb(s.db),g.Qb(s.bb),g.Qb(d.a),g.Qb(u.a))},t.\u0275cmp=g.Kb({type:t,selectors:[["app-location"]],decls:12,vars:0,consts:[[1,"ion-no-border"],[1,"ion-padding"],[1,"contents"],[1,"header"],[1,"subHeader"],["src","assets/map-location.png","alt","",1,"imgs"],["expand","block","shape","round",3,"click"],["expand","block","fill","clear","shape","round",3,"click"]],template:function(t,e){1&t&&(g.Rb(0,"ion-header",0),g.Vb(1,"ion-content",1),g.Vb(2,"div",2),g.Vb(3,"p",3),g.Ac(4,"Para darte el mejor servicio necesitamos acceder a tu"),g.Ub(),g.Vb(5,"p",4),g.Ac(6,"Ubicaci\xf3n"),g.Ub(),g.Rb(7,"img",5),g.Vb(8,"ion-button",6),g.dc("click",function(){return e.getLocation()}),g.Ac(9," Usar ubicaci\xf3n actual "),g.Ub(),g.Vb(10,"ion-button",7),g.dc("click",function(){return e.customLocation()}),g.Ac(11," Elegir ubicaci\xf3n "),g.Ub(),g.Ub(),g.Ub())},directives:[s.s,s.m,s.g],styles:[".contents[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,50%);left:50%;top:20%;text-align:center}.contents[_ngcontent-%COMP%]   .imgs[_ngcontent-%COMP%]{width:100px;height:100px;margin:10px 0}.contents[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-size:15px;margin:5px}.contents[_ngcontent-%COMP%]   .subHeader[_ngcontent-%COMP%]{font-size:25px;font-weight:700;margin:5px;color:var(--ion-color-primary)}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.Ob({type:t}),t.\u0275inj=g.Nb({imports:[[r.i.forChild(b)],r.i]}),t})(),p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.Ob({type:t}),t.\u0275inj=g.Nb({imports:[[o.b,n.e,s.Y,m]]}),t})()}}]);