<!-- 
  Authors : initappz (Rahul Jograna)
  Website : https://initappz.com/
  App Name : ionic 5 foodies app
  Created : 28-Feb-2021
  This App Template Source code is licensed as per the
  terms found in the Website https://initappz.com/license
  Copyright and Good Faith Purchasers © 2020-present initappz.
 -->
<ion-content>
  <div class="mainContent">

    <div class="restContent" [ngStyle]="{'background-image':'url('+api.mediaURL+cover+'),url(assets/placeholder.jpg)'}">
      <div class="btnss">
        <ion-icon (click)="back()" class="backIcon" color="light" slot="start" name="arrow-back-outline"></ion-icon>
      </div>
      
    </div>


    <div class="foodsContent">
      <ion-label class="restname">{{name}}</ion-label>
      <div class="informacion">
        <p class="horario">Horario</p>
        <p class="horario2">{{openTime}} - {{closeTime}}  </p>
        <p class="horario">Tiempo</p>
        <p class="horario2">{{time}} min</p>
      </div>
  
<div class="div_searchbar">
      <ion-searchbar 
       animated="true" mode="ios"
      type="text"
      class="search"
      name="search-product"
      [placeholder]="'Buscar productos'"
      [(ngModel)]="searchByProduct"
      (ngModelChange)="changeFilters()"
      >

      </ion-searchbar>
</div>




      <div *ngIf="categories?.length">
        <ion-segment #content (ionChange)="segmentChanged()" scrollable [(ngModel)]="caetId" mode="md">
          <ion-segment-button [value]="item.id" [id]="item.id" *ngFor="let item of categories">
            <ion-label> {{item.name}} </ion-label>
          </ion-segment-button>
        </ion-segment>
        

        <div class="card_div">
          <div class="card" *ngFor="let item of filteredProducts;let i = index">
            <div class="mainCat">
              <img ionImgViewer [src]="api.mediaURL+item.cover" class="image_div" onError="this.src='assets/placeholder.jpg'"
                [alt]="item.name">
              <div class="desc_div">
                <ion-label class="heading_lbl">
                  {{ (item.name.length>20)? (item.name | slice:0:20)+'..':(item.name) }}
                </ion-label>
                <ion-label class="small_lbl">
                  {{ (item.details.length>30)? (item.details | slice:0:30)+'..':(item.details) }}
                </ion-label>
                <ion-label class="heading_lbl" *ngIf="util.cside ==='left'">{{util.currecny}} {{item.price}}</ion-label>
                <ion-label class="heading_lbl" *ngIf="util.cside ==='right'"> {{item.price}} {{util.currecny}}
                </ion-label>
              </div>
              <div class="cartBtn" *ngIf="!cart.itemId.includes(item.id)">
                <ion-label class="btns" (click)="add(i)">Añadir</ion-label>
                <ion-label *ngIf="item && item.variations && item.variations?.length" style="font-size: 8px;">
                  Personalizable</ion-label>
              </div>
              <div class="cartBtn2" *ngIf="cart.itemId.includes(item.id)">
                <ion-button (click)="removeQ(i)" fill="clear" size="small">
                  <ion-icon name="remove"></ion-icon>
                </ion-button>
                <p class="qunitity">{{item.quantiy}}</p>
                <ion-button (click)="addQ(i)" fill="clear" size="small">
                  <ion-icon name="add"></ion-icon>
                </ion-button>
              </div>
            </div>
          </div>
        </div>
      </div>




      
      <div *ngFor="let item of dummy">
        <ion-list>
          <ion-item>
            <ion-thumbnail slot="start">
              <ion-skeleton-text animated></ion-skeleton-text>
            </ion-thumbnail>
            <ion-label>
              <h3>
                <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
              </h3>
              <p>
                <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
              </p>
              <p>
                <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
              </p>
            </ion-label>
          </ion-item>
        </ion-list>
      </div>

    </div>
  </div>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed" (click)="presentPopover($event)">
    <ion-fab-button color="light" mode="ios">
      <ion-icon name="list" color="primary"></ion-icon>
      <ion-label color="primary">{{util.translate('Menu')}}</ion-label>
    </ion-fab-button>
  </ion-fab>
</ion-content>

<ion-footer *ngIf="cart.cart.length && cart.cart.length > 0" (click)="viewCart()">
  <ion-toolbar color="primary">
    <ion-label color="light">{{cart.totalItem}} Productos</ion-label>
    <ion-label color="light" *ngIf="util.cside ==='left'">{{util.currecny}} {{cart.totalPrice}} total</ion-label>
    <ion-label color="light" *ngIf="util.cside ==='right'">{{cart.totalPrice}} {{util.currecny}} total</ion-label>
    <ion-button slot="end" fill="clear" color="light">
      <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
      Continuar
    </ion-button>
    <ion-ripple-effect type="bounded"></ion-ripple-effect>
  </ion-toolbar>
</ion-footer>